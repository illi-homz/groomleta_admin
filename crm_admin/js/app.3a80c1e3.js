(function(){"use strict";var t={1451:function(t,e,s){var r=s(144),a=s(998),i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(a.Z,[e(t.layout,{tag:"component"},[e("router-view")],1)],1)},n=[],l=s(5716),o=s(5495),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"empty-layout flex-grow-1"},[e(l.Z,{staticClass:"white",attrs:{elevation:"0",app:""}},[e("router-link",{attrs:{to:"/"}},[e("div",{staticClass:"d-flex align-center"},[e(o.Z,{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:s(9574),transition:"scale-transition"}})],1)])],1),e("div",{staticClass:"empty-layout__container d-flex flex-column justify-center align-center"},[t._t("default")],2)],1)},d=[],u={name:"EmptyLayout",data:()=>({})},m=u,h=s(1001),v=(0,h.Z)(m,c,d,!1,null,null,null),p=v.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-layout d-flex flex-column"},[e(l.Z,{staticClass:"white flex-grow-0",attrs:{elevation:"0"}},[e("router-link",{attrs:{to:"/"}},[e("div",{staticClass:"d-flex align-center"},[e(o.Z,{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:s(9574),transition:"scale-transition"}})],1)]),e("nav",{staticClass:"flex-grow-1 d-flex justify-center"},t._l(t.links,(function(s){return e("router-link",{key:s.id,staticClass:"text-decoration-none px-10 main-layout__border-bottom-on-hover",class:{active:s.url===t.$route.path},attrs:{to:s.url}},[e("span",{staticClass:"body-1 grey--text text--darken-3 d-block main-layout__nav-link"},[t._v(" "+t._s(s.title)+" ")])])})),1),e("div",{staticClass:"d-flex align-center pointer",on:{click:t.logout}},[e(o.Z,{staticClass:"shrink mr-2",attrs:{alt:"logout",contain:"",src:s(5053)}}),e("span",[t._v("Выйти")])],1)],1),e("div",{staticClass:"px-8 pb-8 flex-grow-1 d-flex flex-column"},[t._t("default")],2),e("GCreateOrderModalForm"),e("GDetailOrderModalShield")],1)},C=[],f=s(344),_=s(4562),E=s(4145),x=s(4886),y=s(266),S=s(2118),k=s(9930),b=s(9223),O=s(4324),T=s(4528),w=s(1713),P=s(3687),D=s(7808),Z=s(2648),I=s(3807),A=function(){var t=this,e=t._self._c;return e(k.Z,{attrs:{"content-class":"g-create-event-modal-form",value:t.isAvtive,"max-width":"30%"},on:{"click:outside":t.closeModal,keydown:t.onKeyDown}},[e(E.Z,{staticClass:"pt-4 g-create-event-modal-form__card"},[e(_.Z,{staticClass:"g-create-event-modal-form__close-btn",attrs:{icon:""},on:{click:t.closeModal}},[e(O.Z,{attrs:{color:"#243138"}},[t._v("mdi-close")])],1),e(x.EB,{staticClass:"px-8 d-block"},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Заголовок*",color:"#FFC11C",light:"",rules:[t=>!!t||"Укажите название записи"]},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),e(x.ZB,{staticClass:"px-5"},[e(S.Z,[e(w.Z,{staticClass:"mb-4"},[e(y.Z,{staticClass:"d-flex align-end py-0"},[e("div",{staticClass:"flex-grow-1 mr-4"},[e("div",{staticClass:"caption"},[t._v("Время")]),e("div",{staticClass:"mb-1",on:{click:t.toggleTimepiker}},[e("span",{ref:"timepickerText",staticClass:"body-1",staticStyle:{cursor:"pointer"}},[t._v(" "+t._s(t.time)+" ")])]),e(b.Z)],1),e(O.Z,{ref:"timepickerIcon",attrs:{color:"#243138"},on:{click:t.toggleTimepiker}},[t._v(" mdi-clock-outline ")]),e(T.Z,{attrs:{activator:t.$refs.timepickerText,"close-on-content-click":!1,"offset-x":"","offset-y":""},model:{value:t.isTimepikerOpen,callback:function(e){t.isTimepikerOpen=e},expression:"isTimepikerOpen"}},[e(I.Z,{attrs:{color:"#FFC11C",format:"24hr"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1)],1),e(w.Z,{staticClass:"mb-4"},[e(y.Z,{staticClass:"py-0"},[e(f.Z,{attrs:{items:t.servicesList?.map(((t,e)=>({text:`${t.breed.title} - ${t.title}`,value:e}))),color:"#FFC11C","item-color":"#FFC11C","no-data-text":"Ничего не найдено",label:"Услуги","hide-details":"",multiple:""},on:{change:t.setServices},model:{value:t.servicePickerValue,callback:function(e){t.servicePickerValue=e},expression:"servicePickerValue"}}),t.services.length?e("div",{staticClass:"pt-3"},t._l(t.services,(function(r,a){return e("div",{key:r,staticClass:"px-0 pl-2 d-flex",class:{"mt-2":0===a,"mb-4":a!==t.services.length-1}},[e(o.Z,{staticClass:"mr-1",attrs:{src:s(4769),"max-height":24,"max-width":24}}),e("div",{staticClass:"flex-grow-1"},[t._v(" "+t._s(t.servicesList[r].breed.title)+" - "+t._s(t.servicesList[r].title)+" ")]),e(O.Z,{attrs:{color:"#243138"},on:{click:function(e){return t.removeService(a)}}},[t._v(" mdi-close-circle-outline ")])],1)})),0):t._e()],1)],1),e(w.Z,{staticClass:"mb-4"},[e(y.Z,{staticClass:"py-0"},[e(f.Z,{attrs:{items:t.groomersList?.map(((t,e)=>({text:`${t.username} ${t.lastname}`,value:t.id}))),color:"#FFC11C","item-color":"#FFC11C","no-data-text":"Такого мастера нету",clearable:"",label:"Мастер","hide-details":""},model:{value:t.groommer,callback:function(e){t.groommer=e},expression:"groommer"}})],1)],1),e(w.Z,{staticClass:"mb-8"},[e(y.Z,{staticClass:"py-0"},[e(f.Z,{attrs:{items:t.clientsList?.map(((t,e)=>({text:`${t.username} ${t.lastname}`,value:t.id}))),color:"#FFC11C","item-color":"#FFC11C","no-data-text":"Такого клиента нету",clearable:"",label:"Клиент","hide-details":""},model:{value:t.client,callback:function(e){t.client=e},expression:"client"}})],1)],1),e(w.Z,[e(y.Z,[e(Z.Z,{attrs:{label:"Комментарий",color:"#FFC11C","no-resize":"",outlined:"","background-color":"#FFC11C08"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1),e(x.h7,{staticClass:"pb-8 px-8"},[e(P.Z),e(_.Z,{staticClass:"px-6",attrs:{tile:"",text:""},on:{click:t.closeModal}},[t._v(" Закрыть ")]),e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"#FFC11C",dark:t.isFormValid,disabled:!t.isFormValid,tile:"",elevation:"0"},on:{click:t.submitForm}},[t._v(" Создать ")])],1)],1)],1)},R=[];const F=t=>{const e=new Date(t),s=e.toLocaleDateString().split(".").reverse().join("-"),r=e.toLocaleTimeString();return`${s}T${r}`},L=(t,e)=>Object.keys(t)?.reduce(((s,r)=>{if("services"===r){const a=e.services?.map((t=>t.id)),i=t.services?.map((t=>t.id));return i.join(",")!==a.join(",")?{...s,[r]:a}:s}return"client"===r?t.client?.id!==e.client?.id?{...s,[r]:e.client?.id||""}:s:"master"===r?t.master?.id!==e.master?.id?{...s,[r]:e.master?.id}:s:t[r]!==e[r]?{...s,[r]:e[r]}:s}),{}),$={time:"09:00",services:[],servicePickerValue:"",groommer:"",client:"",comment:""};var M={name:"GCreateEventModalForm",props:{isAvtive:{type:Boolean,default:!1},currentDate:{type:String,default:""},currentTime:{type:String,default:""},servicesList:{type:Array,default:()=>[]},groomersList:{type:Array,default:()=>[]},clientsList:{type:Array,default:()=>[]}},data:()=>({...$,timepicerActivetorElement:null,isTimepikerOpen:!1,title:""}),computed:{isFormValid(){return!!this.title},form(){const t=`${this.currentDate}T${this.time}:00`,e=new Date(t).getTime(),s=new Date(e+36e5),r=this.services.map((t=>this.servicesList[t].id));return{title:this.title,startDate:t,endDate:F(s),services:r,client:this.client,master:this.groommer,comment:this.comment}}},watch:{isAvtive(t){t||this.cencelTimepicker()},currentDate(t){const e=t.split("-").reverse().join("-");this.title=`Новая запись на ${e}`},currentTime(t){const[e]=t?.split(":")||[];this.time=`${e||"09"}:00`}},methods:{closeModal(){this.clearFrom(),this.$emit("onModalClose")},submitForm(){this.isFormValid&&(this.$emit("onSubmitEvent",this.form),this.closeModal())},setServices(t){const e=Array.isArray(t)?t:[t];this.services=e},removeService(t){this.services=this.services.filter(((e,s)=>s!==t)),this.servicePickerValue=this.services},toggleTimepiker(){this.isTimepikerOpen=!this.isTimepikerOpen},cencelTimepicker(){this.isTimepikerOpen=!1;const[t]=this.currentTime?.split(":")||[];this.time=`${t||"09"}:00`},clearFrom(){Object.keys($).forEach((t=>{this[t]=$[t]}))},onKeyDown({keyCode:t}){27===t&&this.closeModal()}}},G=M,N=(0,h.Z)(G,A,R,!1,null,null,null),U=N.exports,V=s(8224),B=s(6313),W=s(7953),q=function(){var t=this,e=t._self._c;return t.selectedEvent?e(T.Z,{attrs:{value:t.value,"close-on-content-click":!1,activator:t.selectedElement,"offset-y":""},on:{input:t.vModel}},[e(E.Z,{staticClass:"g-calendar-event-menu ma-2",attrs:{color:"grey lighten-4","min-width":"350px",flat:"",elevation:"2"}},[e(B.Z,{attrs:{color:t.isSuccess?"grey darken-1":t.selectedEvent.color,dark:"",elevation:"0"}},[t.isWritable?e(W.qW,{staticClass:"flex-grow-1 mr-8"},[e(D.Z,{attrs:{value:t.selectedEvent.name,filled:"",dense:"",rounded:"",color:"#FFC11C","background-color":"#FFF",light:"","hide-details":""},on:{input:e=>t.setEvent({name:e})}})],1):e(W.qW,{staticClass:"flex-grow-1 mr-8"},[t._v(" "+t._s(t.selectedEvent.name)+" ")]),t.isSuccess||t.isWritable?t._e():e(_.Z,{staticClass:"mr-2",attrs:{fab:"",color:"white",light:"",height:"40",width:"40",elevation:"0"},on:{click:function(e){t.isWritable=!t.isWritable}}},[e(O.Z,[t._v("mdi-pencil")])],1),t.isSuccess?t._e():e("GRemoveBtn",{on:{onRemoveEvent:function(e){return t.$emit("onRemoveEvent",t.selectedEvent.id)}}})],1),e(x.ZB,{staticClass:"white"},[e("div",[e("div",{staticClass:"text-h6"},[t._v("Услуги:")]),t.isWritable?e("div",{staticClass:"mb-2"},[e("div",{staticClass:"mb-1"},t._l(t.selectedEvent.services,(function(s,r){return e("div",{key:s.id,staticClass:"px-0 pl-2 d-flex"},[e("div",{staticClass:"flex-grow-1"},[t._v(" "+t._s(s.breed.title)+" - "+t._s(s.title)+" ")]),e(O.Z,{attrs:{color:"#FFC11C"},on:{click:function(e){return t.removeService(r)}}},[t._v(" mdi-close ")])],1)})),0),e(f.Z,{attrs:{items:t.servicesList.map(((t,e)=>({text:`${t.breed.title} - ${t.title}`,value:e}))),value:t.selectedEvent.services?.map(((t,e)=>e)),color:"#FFC11C","item-color":"#FFC11C","no-data-text":"Ничего не найдено",placeholder:"Услуги","hide-details":"",outlined:"",dense:"","background-color":"#FFF",clearable:"",multiple:"",chips:"","small-chips":"","deletable-chips":""},on:{change:t.setServices}})],1):e("div",[t.selectedEvent.services?.length?e("ul",t._l(t.selectedEvent.services,(function(s){return e("li",{key:s.id,staticClass:"pl-1"},[t._v(" "+t._s(s.breed.title)+" - "+t._s(s.title)+" ")])})),0):e("div",{staticClass:"px-2"},[e("i",[t._v("Услуги не выбраны")])])])]),e("div",[e("span",{staticClass:"text-h6"},[t._v("Мастер:")]),t.isWritable?e("div",{staticClass:"mb-2"},[e(f.Z,{staticClass:"pt-0 mt-0",attrs:{items:t.groomersList?.map(((t,e)=>({text:`${t.username} ${t.lastname}`,value:e}))),value:t.groomersList?.findIndex((e=>e.id===t.selectedEvent.master?.id)),color:"#FFC11C","item-color":"#FFC11C","no-data-text":"Такого мастера нету",clearable:"","hide-details":"","background-color":"#FFF",outlined:"",dense:""},on:{change:t.setMaster}})],1):e("div",[t.selectedEvent.master?e("div",{staticClass:"ml-2"},[t._v(" "+t._s(t.selectedEvent.master?.username)+" ")]):e("div",{staticClass:"ml-2"},[t._v("Не назначен")])])]),e("div",[e("span",{staticClass:"text-h6"},[t._v("Клиент:")]),t.isWritable?e("div",{staticClass:"mb-2"},[e(f.Z,{staticClass:"pt-0 mt-0",attrs:{items:t.clientsList?.map(((t,e)=>({text:`${t.username} ${t.lastname}`,value:e}))),value:t.clientsList?.findIndex((e=>e.id===t.selectedEvent.client?.id)),color:"#FFC11C","item-color":"#FFC11C","no-data-text":"Такого клиента нету","hide-details":"","background-color":"#FFF",outlined:"",clearable:"",dense:""},on:{change:t.setClient}})],1):e("div",[t.selectedEvent.client?e("div",{staticClass:"ml-2"},[e("router-link",{attrs:{to:{name:"g-clientdetail",params:{id:t.selectedEvent.client.id}}}},[t._v(" "+t._s(t.selectedEvent.client.username)+" "+t._s(t.selectedEvent.client.lastname))]),t._v(" "+t._s(` - ${t.selectedEvent.client.phone}`)+" ")],1):e("div",{staticClass:"ml-2"},[t._v("Не выбран")])])]),e("div",[t.selectedEvent.comment||t.isWritable?e("span",{staticClass:"text-h6"},[t._v(" Комментарий: ")]):t._e(),t.isWritable?e(Z.Z,{staticClass:"mt-2",attrs:{value:t.selectedEvent.comment,label:"Комментарий",color:"#ddd",rows:"2","hide-details":"","no-resize":"",outlined:"","background-color":"#fff"},on:{input:e=>t.setEvent({comment:e})}}):e("div",{staticClass:"ml-2"},[t._v(" "+t._s(t.selectedEvent.comment)+" ")])],1)]),e(x.h7,[t.isWritable?e("div",[e(V.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:s}){return[e(_.Z,{staticClass:"mr-2",attrs:{color:s?"black":"#243138",elevation:"0",outlined:!s,dark:s,tile:""},on:{click:t.cancelEvent}},[t._v(" Отменить ")])]}}],null,!1,4200521884)}),e(V.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:s}){return[e(_.Z,{attrs:{color:s?"black":"#243138",elevation:"0",outlined:!s,dark:s,tile:""},on:{click:t.saveCanges}},[t._v(" Сохранить ")])]}}],null,!1,430393077)})],1):t._e(),t.isWritable?t._e():e("div",[e(V.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:s}){return[e(_.Z,{staticClass:"mr-2",attrs:{color:s?"black":"#243138",elevation:"0",outlined:!s,dark:s,tile:""},on:{click:t.closeEvent}},[t._v(" Закрыть ")])]}}],null,!1,141496426)}),t.isSuccess?t._e():e(V.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:s}){return[e(_.Z,{attrs:{color:s?"black":"#243138",elevation:"0",outlined:!s,dark:s,tile:""},on:{click:t.toCreateOrder}},[t._v(" Оформить заказ ")])]}}],null,!1,3273921997)})],1)])],1)],1):t._e()},j=[],H=function(){var t=this,e=t._self._c;return e(k.Z,{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:r}){return[e(_.Z,t._g(t._b({attrs:{fab:"",color:"white",light:"",height:"40",width:"40",elevation:"0"}},"v-btn",r,!1),s),[e(O.Z,[t._v("mdi-trash-can-outline")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(E.Z,[e(x.EB,{staticClass:"text-h5"},[t._v(" Удалить событие? ")]),e(x.ZB,[t._v("После удаления данные будут недоступны")]),e(x.h7,[e(P.Z),e(_.Z,{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Отмена ")]),e(_.Z,{attrs:{color:"red darken-1",text:""},on:{click:t.success}},[t._v(" Удалить ")])],1)],1)],1)},K=[],Y={name:"GRemoveBtn",data:()=>({dialog:!1}),methods:{success(){this.$emit("onRemoveEvent"),this.dialog=!1}}},J=Y,z=(0,h.Z)(J,H,K,!1,null,null,null),Q=z.exports,X={name:"GCalendarEventMenu",components:{GRemoveBtn:Q},props:["selectedEvent","value","selectedElement","servicesList","groomersList","clientsList"],data:()=>({isWritable:!1,selectedServices:"",oldEvent:null}),computed:{isSuccess(){return this.selectedEvent.isSuccess}},watch:{value(t){!t&&this.isWritable&&this.cancelEvent()},selectedEvent(t){this.oldEvent=JSON.parse(JSON.stringify(t))}},methods:{vModel(t){this.$emit("input",t)},cancelEvent(){this.isWritable=!1,this.oldEvent&&this.selectedEvent.id&&this.setEvent(this.oldEvent)},closeEvent(){this.cancelEvent(),this.$emit("input",!1)},setEvent(t){this.$emit("setEvent",t)},saveCanges(){this.$emit("saveEvent"),this.oldEvent=null,this.isWritable=!1},setServices(t){const e=Array.isArray(t)?t.map((t=>this.servicesList[t])):[this.servicesList[t]];this.setEvent({services:e})},removeService(t){const e=this.selectedEvent.services?.filter(((e,s)=>t!==s));this.setEvent({services:e})},setMaster(t){const e=this.groomersList[t];this.setEvent({master:e})},setClient(t){const e=this.clientsList[t];this.setEvent({client:e||""})},toCreateOrder(){const{client:t,master:e,id:s,services:r}=this.selectedEvent,a={orderItems:r?.map((t=>({id:t.id,count:1,type:"service"})))||[],clientId:t?.id||"",masterId:e?.id||"",eventId:s};this.$emit("toCreateOrder",a)}}},tt=X,et=(0,h.Z)(tt,q,j,!1,null,null,null),st=et.exports,rt=function(){var t=this,e=t._self._c;return e(k.Z,{attrs:{"content-class":"g-create-client-modal-form",value:t.isAvtive,"max-width":"40%"},on:{"click:outside":t.closeModal,keydown:t.onKeyDown}},[e(E.Z,{staticClass:"pt-4"},[e(x.EB,{staticClass:"px-8 mb-4 d-block"},[e("span",{staticClass:"text-h4"},[t._v("Создание клиента")])]),e(x.ZB,{staticClass:"px-5"},[e(S.Z,[e(w.Z,[e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Имя*",color:"#FFC11C",light:"",rules:[t=>!!t||"Укажите имя"]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Фамилия",color:"#FFC11C",light:""},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}})],1)],1),e(w.Z,{staticClass:"mb-4"},[e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{value:t.phone,label:"Телефон",color:"#FFC11C",light:""},on:{input:e=>t.phone=t.onPhoneInput(e)}})],1),e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Питомец",color:"#FFC11C",light:""},model:{value:t.animal,callback:function(e){t.animal=e},expression:"animal"}})],1)],1),e(w.Z,[e(y.Z,[e(Z.Z,{attrs:{label:"Комментарий",color:"#FFC11C","no-resize":"",outlined:"","background-color":"#f9f9f9",rows:"6"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1),e(x.h7,{staticClass:"pb-8 px-8"},[e(P.Z),e(_.Z,{staticClass:"px-6",attrs:{tile:"",text:""},on:{click:t.closeModal}},[t._v(" Закрыть ")]),e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"#FFC11C",dark:t.isFormValid,disabled:!t.isFormValid,tile:"",elevation:"0"},on:{click:t.submitForm}},[t._v(" Создать ")])],1)],1)],1)},at=[],it=document.querySelectorAll(".data-tel-input input"),nt=function(t){return t.replace(/\D/g,"")},lt=function(t){var e=t.target,s=nt(e.value),r=t.clipboardData||window.clipboardData;if(r){var a=r.getData("Text");if(/\D/g.test(a))return void(e.value=s)}};const ot=function(t){var e=nt(t),s="";if(!e)return"";if(["7","8","9"].indexOf(e[0])>-1){"9"==e[0]&&(e="7"+e);var r="8"==e[0]?"8":"+7";s=r+" ",e.length>1&&(s+="("+e.substring(1,4)),e.length>=5&&(s+=") "+e.substring(4,7)),e.length>=8&&(s+="-"+e.substring(7,9)),e.length>=10&&(s+="-"+e.substring(9,11))}else s="+"+e.substring(0,16);return console.log("formattedInputValue",s),s};var ct=function(t){var e=t.target.value.replace(/\D/g,"");8==t.keyCode&&1==e.length&&(t.target.value="")};for(var dt of it)dt.addEventListener("keydown",ct),dt.addEventListener("input",ot,!1),dt.addEventListener("paste",lt,!1);const ut={username:"",lastname:"",phone:"",comment:"",animal:""};var mt={name:"GCreateClientModalForm",props:{isAvtive:{type:Boolean,default:!1}},data:()=>({...ut}),computed:{isFormValid(){return!!this.username},form(){return{username:this.username.trim(),lastname:this.lastname.trim(),phone:this.phone.trim(),comment:this.comment.trim(),animal:this.animal.trim()}}},methods:{onPhoneInput:ot,closeModal(){this.clearFrom(),this.$emit("onModalClose")},clearFrom(){Object.keys(ut).forEach((t=>{this[t]=ut[t]}))},submitForm(){this.isFormValid&&(this.$emit("onSubmitEvent",this.form),this.closeModal())},onKeyDown({keyCode:t}){27===t&&this.closeModal()}}},ht=mt,vt=(0,h.Z)(ht,rt,at,!1,null,null,null),pt=vt.exports,gt=s(120),Ct=s(7927),ft=function(){var t=this,e=t._self._c;return e(k.Z,{attrs:{"content-class":"g-create-order-modal-form",value:t.IS_CREATE_ORDER_SHOW,"max-width":"55%"},on:{"click:outside":t.closeModal,keydown:t.onKeyDown}},[e(E.Z,{staticClass:"pt-4"},[e(x.EB,{staticClass:"px-8 d-block"},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"text-h4"},[t._v("Оформление заказа")]),e(P.Z),e(_.Z,{attrs:{icon:"",large:""},on:{click:t.closeModal}},[e(O.Z,{attrs:{large:""}},[t._v("mdi-close")])],1)],1),e(b.Z,{staticClass:"mt-4"})],1),e(x.ZB,{staticClass:"px-5"},[e(S.Z,[e(w.Z,[e(y.Z,{attrs:{cols:"4"}},[e(f.Z,{attrs:{items:t.GROOMERS.map((t=>({text:`${t.username} ${t.lastname}`,value:t.id}))),color:"rgba(36, 49, 56, 0.38)","item-color":"rgb(36, 49, 56)","no-data-text":"Ничего не найдено",label:"Мастер","hide-details":"",dense:"","background-color":"#FFF",clearable:""},model:{value:t.masterId,callback:function(e){t.masterId=e},expression:"masterId"}})],1),e(y.Z,{attrs:{cols:"4"}},[e(f.Z,{attrs:{items:t.CLIENTS.map((t=>({text:`${t.username} ${t.lastname}`,value:t.id}))),color:"rgba(36, 49, 56, 0.38)","item-color":"rgb(36, 49, 56)","no-data-text":"Ничего не найдено",label:"Клиент","hide-details":"",dense:"","background-color":"#FFF",clearable:""},model:{value:t.clientId,callback:function(e){t.clientId=e},expression:"clientId"}})],1),e(y.Z,{staticClass:"d-flex justify-end",attrs:{cols:"4"}},[t.checkedItems.length?e(_.Z,{staticClass:"mr-2",attrs:{text:"","x-small":"",color:"#FF5252"},on:{click:t.removeSelected}},[t._v(" Удалить выбранные ")]):t._e(),e(_.Z,{attrs:{text:"","x-small":""},on:{click:t.clearAll}},[t._v(" Удалить все ")])],1)],1),e(w.Z,[e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{attrs:{dense:"",color:"gray",label:"Фамилия",light:"","hide-details":"",type:"text",disabled:!!t.clientId},model:{value:t.client.lastname,callback:function(e){t.$set(t.client,"lastname",e)},expression:"client.lastname"}})],1),e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{attrs:{dense:"",color:"gray",label:"Имя",light:"","hide-details":"",type:"text",disabled:!!t.clientId},model:{value:t.client.username,callback:function(e){t.$set(t.client,"username",e)},expression:"client.username"}})],1)],1),e(w.Z,[e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{staticClass:"text-h5",attrs:{value:t.client?.phone||"",label:"Телефон",color:"#FFC11C",light:"",dense:"",disabled:!!t.clientId},on:{input:e=>t.client?.phone&&(t.client.phone=t.onPhoneInput(e))}})],1),e(y.Z,{attrs:{cols:"4"}},[t.isNewClient?e("div",{staticClass:"d-flex justify-space-between"},[e(_.Z,{attrs:{outlined:"",tile:""},on:{click:t.cancelClientCreation}},[t._v(" Отменить ")]),e(_.Z,{attrs:{tile:"",dark:"",color:"#FFC11C",elevation:"0"},on:{click:t.createClient}},[t._v(" Создать клиента ")])],1):t._e()])],1),e(w.Z,[e(y.Z,{attrs:{cols:"8"}},[e(f.Z,{attrs:{value:t.search,items:[...t.servicesList,...t.productsList],color:"gray","prepend-inner-icon":"mdi-magnify","item-color":"#FFC11C","no-data-text":"Ничего не найдено",placeholder:"Поиск товара или услуги","hide-details":"",outlined:"",dense:"","background-color":"#FFF",clearable:""},on:{change:t.setBasket}})],1)],1),e(w.Z,[e(y.Z,[e(Ct.Z,{attrs:{headers:t.headers,items:t.orderItems,"no-data-text":"Ничего не выбрано","no-results-text":"Ничего не выбрано","loading-text":"Загрузка","hide-default-footer":""},scopedSlots:t._u([{key:"item",fn:function({item:{count:s,id:r,type:a}}){return[e("tr",[e("td",{staticClass:"g-stock__td py-2"},[e("div",{staticClass:"d-flex align-center"},[e(gt.Z,{staticClass:"d-inline ma-0 pa-0",attrs:{value:t.checkCheckedId({id:r,type:a}),color:"#FFC11C","hide-details":""},on:{change:function(e){return t.toggleChecked({id:r,type:a})}}}),"product"===a?e("span",[t._v(" "+t._s(t.productsObj[r].title)+" ")]):t._e(),"service"===a?e("span",[t._v(" "+t._s(t.servicesObj[r].title)+" ")]):t._e(),t._v(" "+t._s(r)+" ")],1)]),e("td",{staticClass:"g-stock__td text-center py-2"},[e(O.Z,{on:{click:function(e){return t.decrement({id:r,type:a})}}},[t._v(" mdi-minus ")]),e("span",{staticClass:"mx-2"},[t._v(t._s(s))]),e(O.Z,{on:{click:function(e){return t.increment({id:r,type:a})}}},[t._v(" mdi-plus ")])],1),e("td",{staticClass:"g-stock__td text-right py-2"},["product"===a?e("span",[e(D.Z,{attrs:{filled:"",dense:"",color:"#FFC11C",light:"","hide-details":"",type:"text"},model:{value:t.costomProductsPrices[r],callback:function(e){t.$set(t.costomProductsPrices,r,e)},expression:"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcostomProductsPrices[id]\n\t\t\t\t\t\t\t\t\t\t\t\t"}})],1):t._e(),"service"===a?e("span",[e(D.Z,{attrs:{filled:"",dense:"",color:"#FFC11C",light:"","hide-details":"",type:"text"},model:{value:t.costomServicesPrices[r],callback:function(e){t.$set(t.costomServicesPrices,r,e)},expression:"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcostomServicesPrices[id]\n\t\t\t\t\t\t\t\t\t\t\t\t"}})],1):t._e()]),e("td",{staticClass:"g-stock__td text-right py-2"},["product"===a?e("span",[t._v(" "+t._s(t.parsePrice(t.costomProductsPrices[r])*s)+" ")]):t._e(),"service"===a?e("span",[t._v(" "+t._s(t.parsePrice(t.costomServicesPrices[r])*s)+" ")]):t._e()])])]}}])})],1)],1)],1)],1),e(x.h7,{staticClass:"pb-8 px-8"},[e(P.Z),e("div",{staticClass:"mr-5"},[e("b",{staticClass:"mr-2"},[t._v("Итого:")]),e("b",[t._v(t._s(t.finalPrice))])]),t.orderId?t._e():e(_.Z,{staticClass:"px-6 ml-4",attrs:{disabled:!t.isFormValid,tile:"",elevation:"0",outlined:""},on:{click:t.reserveOrder}},[t._v(" Забронировать ")]),t.orderId?t._e():e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"#FFC11C",dark:t.isFormValid,disabled:!t.isFormValid,tile:"",elevation:"0"},on:{click:t.createOrder}},[t._v(" Оформить ")]),t.orderId?e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"#FFC11C",dark:t.isFormValid,disabled:!t.isFormValid,tile:"",elevation:"0"},on:{click:t.pyForOrder}},[t._v(" Оплатить ")]):t._e()],1)],1)],1)},_t=[];const Et=(t,e)=>e[t%10===1&&t%100!==11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2],xt=t=>{const e=new Date(t).getTime(),s=Date.now()-e,r=new Date(s),a=r.getMonth(),i=r.getDate(),n=r.getUTCFullYear(),l=Math.abs(n-1970);return l?`${l} ${Et(l,["год","года","лет"])}`:a?`${a} ${Et(a,["месяц","месяца","месяцев"])}`:`${i} ${Et(i,["день","дня","дней"])}`},yt=t=>"number"===typeof t?t:t?.replace(/[^\d.]/g,"");var St=s(629);const kt={orderItems:[],checkedItems:[],clientId:"",masterId:"",eventId:"",search:""},bt={product:"productId",service:"serviceId"},Ot={username:"",lastname:"",phone:""};var Tt={name:"GCreateOrderModalForm",data:()=>({client:{username:"",lastname:"",phone:""},orderItems:[],checkedItems:[],costomProductsPrices:{},costomServicesPrices:{},clientId:"",masterId:"",eventId:"",orderId:"",search:"",headers:[{text:"Название",value:"title"},{text:"Количество",value:"count",width:130},{text:"Сумма ₽, шт",value:"price",width:130},{text:"Всего ₽",value:"finalPrice",width:130}]}),computed:{...(0,St.Se)(["EVENTS","CLIENTS","GROOMERS","SERVICES","PRODUCTS","IS_CREATE_ORDER_SHOW","DEFAULT_ORDER_DATA"]),isNewClient(){const{username:t,lastname:e}=this.client;return!(this.clientId||!t||!e)},servicesList(){return this.SERVICES.map((t=>(console.log("SERVICES el",t),{text:t.breed?.title?`${t.breed.title} - ${t.title}`:t.title,value:{id:t.id,type:"service"}})))},productsList(){return this.PRODUCTS.filter((t=>+t.count)).map((t=>({text:t.title,value:{id:t.id,type:"product"}})))},servicesObj(){return this.SERVICES.reduce(((t,e)=>({...t,[e.id]:e})),{})},productsObj(){return this.PRODUCTS.reduce(((t,e)=>({...t,[e.id]:e})),{})},isFormValid(){return!!this.orderItems.length},currentObj(){return{service:this.costomServicesPrices,product:this.costomProductsPrices}},finalPrice(){return this.orderItems.reduce(((t,{id:e,type:s,count:r})=>{const a=this.parsePrice(this.currentObj[s][e]);return t+a*r}),0)},form(){const{service:t,product:e}=this.orderItems.reduce(((t,{id:e,type:s,count:r,orderId:a})=>{const i=bt[s];return{...t,[s]:[...t[s],{[i]:e,count:r,id:a}]}}),{service:[],product:[]});return{services:t,products:e,price:this.finalPrice}}},watch:{orderItems(t){for(let{id:e,type:s}of t)"service"===s&&(this.costomServicesPrices={...this.costomServicesPrices,[e]:this.servicesObj[e].price}),"product"===s&&(this.costomProductsPrices={...this.costomProductsPrices,[e]:this.productsObj[e].price})},DEFAULT_ORDER_DATA(t){if(t)for(let e in t)this[e]=t[e]},clientId(t){this.client={...this.CLIENTS.find((e=>e.id===t))}}},methods:{...(0,St.nv)(["CREATE_ORDER","SUCCESS_EVENT","UPDATE_AND_PAY_ORDER","CREATE_CLIENT"]),...(0,St.OI)(["CLOSE_ORDER_FORM"]),onPhoneInput:ot,parsePrice:yt,closeModal(){this.CLOSE_ORDER_FORM()},clearFrom(){Object.keys(kt).forEach((t=>{this[t]=kt[t]}))},onKeyDown({keyCode:t}){27===t&&this.closeModal()},setBasket({id:t,type:e}){try{if(!t||!e)throw!1;this.search="-";const s=this.orderItems.findIndex((s=>s.id===t&&s.type===e));if("service"===e){if(-1!==s)throw this.orderItems[s].count+=1,!1;this.orderItems.push({type:"service",id:t,count:1})}if("product"===e){if(-1!==s)throw this.orderItems[s].count+=1,!1;this.orderItems.push({type:"product",id:t,count:1})}throw!1}catch(s){setTimeout((()=>this.search=""),0)}},async createOrder({isSuccess:t=!0,isReserved:e=!1}){if(!confirm("Продолжить?"))return;const{data:s}=await this.CREATE_ORDER({...this.form,clientId:this.clientId,masterId:this.masterId,isSuccess:t,isReserved:e});s&&this.eventId&&await this.SUCCESS_EVENT(this.eventId),this.clearFrom(),this.closeModal()},async pyForOrder(){if(!confirm("Продолжить?"))return;const{data:t}=await this.UPDATE_AND_PAY_ORDER({id:this.orderId,orderData:{...this.form,clientId:this.clientId,masterId:this.masterId}});this.clearFrom(),this.closeModal()},reserveOrder(){this.createOrder({isSuccess:!1,isReserved:!0})},increment({id:t,type:e}){const s=this.orderItems.findIndex((s=>s.id===t&&s.type===e));if("service"===e)return this.orderItems[s].count++;const r=this.productsObj[this.orderItems[s].id];r.count>this.orderItems[s].count&&this.orderItems[s].count++},decrement({id:t,type:e}){const s=this.orderItems.findIndex((s=>s.id===t&&s.type===e));1!==this.orderItems[s].count?this.orderItems[s].count--:confirm("Удалить?")&&(this.orderItems=this.orderItems.filter(((t,e)=>e!==s)))},clearAll(){confirm("Очистить карзину?")&&this.clearFrom()},toggleChecked({id:t,type:e}){const s=s=>s.id===t&&s.type===e,r=this.checkedItems.findIndex((t=>s(t)));this.checkedItems=-1!==r?this.checkedItems.filter((t=>!s(t))):[...this.checkedItems,{id:t,type:e}]},removeSelected(){this.orderItems=this.orderItems.filter((({id:t,type:e})=>!this.checkedItems.find((s=>s.id===t&&s.type===e)))),this.checkedItems=[]},checkCheckedId({id:t,type:e}){return!!this.checkedItems.find((s=>s.id===t&&s.type===e))},cancelClientCreation(){this.client={...Ot}},async createClient(){const{username:t,lastname:e,phone:s}=this.client,{data:{client:r}}=await this.CREATE_CLIENT({username:t?.trim(),lastname:e?.trim()||"",phone:s?.trim()||"",comment:"",animal:""});this.clientId=r.id}}},wt=Tt,Pt=(0,h.Z)(wt,ft,_t,!1,null,null,null),Dt=Pt.exports,Zt=s(3138),It=function(){var t=this,e=t._self._c;return e(k.Z,{attrs:{"content-class":"g-create-groomer-modal-form",value:t.isAvtive,"max-width":"40%"},on:{"click:outside":t.closeModal,keydown:t.onKeyDown}},[e(E.Z,{staticClass:"pt-4"},[e(x.EB,{staticClass:"px-8 mb-4 d-block"},[e("span",{staticClass:"text-h4"},[t._v("Создание нового грумера")])]),e(x.ZB,{staticClass:"px-5"},[e(S.Z,[e(w.Z,{staticClass:"mb-4"},[e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Фамилия",color:"#FFC11C",light:""},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}})],1),e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Имя*",color:"#FFC11C",light:"",rules:[t=>!!t||"Укажите имя"]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),e(w.Z,{staticClass:"mb-4"},[e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{value:t.phone,label:"Телефон",color:"#FFC11C",light:""},on:{input:t.setPhone}})],1),e(y.Z,{staticClass:"py-0"},[e(Zt.Z,{attrs:{items:t.posts,label:"Должность",color:"#FFC11C","item-color":"warning"},model:{value:t.post,callback:function(e){t.post=e},expression:"post"}})],1)],1),e(w.Z,{staticClass:"mb-4"},[e(y.Z,{staticClass:"py-0",attrs:{cols:"10"}},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Адрес",color:"#FFC11C",light:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{value:t.rate,label:"Ставка, %",color:"#FFC11C",light:""},on:{input:t.setRate}})],1)],1),e(w.Z,{staticClass:"mb-4"},[e(y.Z,{staticClass:"py-0"},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Образование",color:"#FFC11C",light:""},model:{value:t.education,callback:function(e){t.education=e},expression:"education"}})],1),e(y.Z,{staticClass:"py-0 d-flex justify-end align-center"},[e("GColorSelector",{attrs:{data:t.colors},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)],1),e(w.Z,[e(y.Z,[e(Z.Z,{attrs:{label:"Комментарий",color:"#FFC11C","no-resize":"",outlined:"","background-color":"#f9f9f9",rows:"6",counter:"100"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1),e(x.h7,{staticClass:"pb-8 px-8"},[e(P.Z),e(_.Z,{staticClass:"px-6",attrs:{tile:"",text:"",outlined:""},on:{click:t.closeModal}},[t._v(" Отменить ")]),e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"#FFC11C",dark:t.isFormValid,disabled:!t.isFormValid,tile:"",elevation:"0"},on:{click:t.submitForm}},[t._v(" Создать грумера ")])],1)],1)],1)},At=[],Rt=s(3577),Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-color-selector"},[t._l(t.data,(function(s){return e(_.Z,{key:s,staticClass:"mr-2",attrs:{fab:"",elevation:"0",width:"24",height:"24"},on:{click:function(e){return t.setColor({hex:s})}}},[s===t.value?e(O.Z,{attrs:{color:s,size:"28px"}},[t._v("mdi-checkbox-blank-circle")]):e(O.Z,{attrs:{color:s,size:"28px"}},[t._v("mdi-checkbox-blank-circle-outline")])],1)})),e(T.Z,{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:a}){return[e(_.Z,t._g(t._b({attrs:{fab:"",elevation:"0",width:"24",height:"24"}},"v-btn",a,!1),r),[e(o.Z,{attrs:{src:s(2191),width:"24",height:"24"}})],1)]}}])},[e(Rt.Z,{attrs:{"dot-size":"25","hide-inputs":"","swatches-max-height":"200"},on:{input:t.setColor}})],1)],2)},Lt=[],$t={name:"GColorSelector",props:{data:{type:Array,default:()=>["#FFBE11"]},value:{type:String,default:""}},data:()=>({}),mounted(){},methods:{onPhoneInput:ot,setColor({hex:t}){this.$emit("input",t)}}},Mt=$t,Gt=(0,h.Z)(Mt,Ft,Lt,!1,null,null,null),Nt=Gt.exports;const Ut={MAIN_GROOMMER:"Главный груммер",GROOMMER:"Груммер",HELPER:"Помощник груммера"},Vt=[{text:"Главный груммер",value:"MAIN_GROOMMER"},{text:"Груммер",value:"GROOMMER"},{text:"Помощник груммера",value:"HELPER"}],Bt=["#FFBE11","#FF5555","#85CF26","#0099CA","#A621D4","#D70D9E","#15CBD7","#0643E2","#F58014"];var Wt={name:"GCreateGroomerModalForm",components:{GColorSelector:Nt},props:{isAvtive:{type:Boolean,default:!1}},data:()=>({...qt,username:"",lastname:"",phone:"",post:"groommer",education:"",address:"",rate:0,comment:"",posts:[{text:"Главный груммер",value:"main_groommer"},{text:"Груммер",value:"groommer"},{text:"Помощник груммера",value:"helper"}],color:"#FFBE11",colors:Bt}),computed:{isFormValid(){return!!this.username},form(){return{username:this.username.trim(),lastname:this.lastname.trim(),phone:this.phone.trim(),comment:this.comment.trim(),post:this.post.toLowerCase(),color:this.color.trim(),education:this.education.trim(),address:this.address.trim(),rate:this.rate}}},methods:{closeModal(){this.clearFrom(),this.$emit("onModalClose")},clearFrom(){Object.keys(qt).forEach((t=>{this[t]=qt[t]}))},submitForm(){this.isFormValid&&(this.$emit("onSubmit",this.form),this.closeModal())},onKeyDown({keyCode:t}){27===t&&this.closeModal()},setRate(t){const e=t.replace(/\D/g,"");this.rate===+e&&(this.rate=t),setTimeout((()=>this.rate=+e),0)},setPhone(t){const e=ot(t);this.phone===e&&(this.phone=t),setTimeout((()=>this.phone=e),0)}}};const qt={username:"",lastname:"",post:"groommer",phone:"",comment:"",color:"#FFC11C",rate:0,address:""};var jt=Wt,Ht=(0,h.Z)(jt,It,At,!1,null,null,null),Kt=Ht.exports,Yt=s(8918),Jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column"},[e(Ct.Z,{staticClass:"g-groomer-orders-table flex-grow-1",attrs:{"items-per-page":t.itemsPerPage,headers:t.headers,items:t.servicesList,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка","checkbox-color":"#FFC11C","hide-default-footer":"",page:t.currentPage},on:{pagination:t.setCurrentPage},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[e("tr",{staticClass:"pointer"},[e("td",{staticClass:"py-2"},[t._v(" "+t._s(s.date)+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.title)+" ")]),e("td",{staticClass:"text-xs-right py-2 text-center"},[t._v(" "+t._s(s.count)+" ")]),e("td",{staticClass:"text-xs-right py-2 text-right"},[t._v(" "+t._s(s.price)+" ")]),e("td",{staticClass:"text-xs-right py-2 text-right"},[t._v(" "+t._s(s.fullPrice)+" ")])])]}},{key:"foot",fn:function(){return[e("tfoot",[e("tr",[e("td",{staticClass:"text-h6 font-weight-black"},[t._v("Итого")]),e("td"),e("td"),e("td"),e("td",{staticClass:"text-h6 text-right font-weight-black"},[t._v(" "+t._s(t.fullPrice)+" ")])])])]},proxy:!0},{key:"footer",fn:function({props:{options:s,pagination:r}}){return[e("div",{staticClass:"v-data-footer__wrapper d-flex align-center pl-2"},[e("div",{staticClass:"v-data-footer__info"},[t._v(" Всего: "+t._s(t.servicesList.length)+" "+t._s(t.declOfNum(t.servicesList.length,t.titles))+" ")]),e(Yt.Z,{staticClass:"flex-grow-1",attrs:{options:s,pagination:r,"items-per-page-text":"Строк на странице:","items-per-page-all-text":"Все","show-current-page":"","show-first-last-page":"","page-text":`${t.currentPage} из ${t.pageCount}`},on:{"update:options":t.footerUpdate}})],1)]}}])})],1)},zt=[],Qt={name:"GDetailPageOrdersTable",props:{orders:{type:Array,default:()=>[]}},data:()=>({headers:[{text:"Дата",value:"date",width:140},{text:"Услуга",value:"title"},{text:"Колличество",value:"count",width:150,align:"center"},{text:"Стоимость, ₽",value:"price",width:150},{text:"Всего, ₽",value:"fullPrice",width:150}],currentPage:0,itemsPerPage:15,pageCount:0,titles:["услуга","услуги","услуг"]}),computed:{servicesList(){return this.orders.reduce(((t,{services:e,updateDate:s})=>{const r=[...t];return e?.forEach((({count:t,service:e})=>{r.push({date:new Date(s).toLocaleDateString(),title:e.title,count:t,price:e.price,fullPrice:t*+yt(e.price)})})),r}),[])},servicesList2(){const t=this.orders.reduce(((t,{services:e,updateDate:s})=>{const r={...t};return e?.forEach((({count:t,service:{id:e,title:a,price:i}})=>{if(!r[e])return void(r[e]={date:new Date(s).toLocaleDateString(),title:a,count:t,price:i,fullPrice:t*+i});const{count:n}=r[e],l=r[e].count+n;r[e]={...r[e],count:l,fullPrice:l*+yt(i),date:new Date(s).toLocaleDateString()}})),r}),{});return Object.values(t)},fullPrice(){return this.servicesList.reduce(((t,e)=>t+e.fullPrice),0)}},mounted(){},methods:{declOfNum:Et,parsePrice:yt,setCurrentPage({page:t,pageCount:e}){this.currentPage=t,this.pageCount=e},footerUpdate({page:t,itemsPerPage:e}){this.currentPage=t,this.itemsPerPage=e}}},Xt=Qt,te=(0,h.Z)(Xt,Jt,zt,!1,null,null,null),ee=te.exports,se=function(){var t=this,e=t._self._c;return e(Ct.Z,{staticClass:"g-groomer-services-table",attrs:{"items-per-page":t.itemsPerPage,headers:t.headers,items:t.ordersList,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка",color:"#FFC11C","hide-default-footer":"",page:t.currentPage},on:{pagination:t.setCurrentPage},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[e("tr",{staticClass:"pointer",on:{click:function(e){return t.showDetail(s.data)}}},[e("td",{staticClass:"py-2"},[t._v(" "+t._s(s.date)+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.services)+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.products)+" ")]),e("td",{staticClass:"text-xs-right py-2 text-center"},[t._v(" "+t._s(s.groomer)+" ")]),e("td",{staticClass:"text-xs-right py-2 text-center"},[t._v(" "+t._s(s.client)+" ")]),e("td",{staticClass:"text-xs-right py-2 text-center"},[e("span",{staticClass:"g-groomer-services-table__status",class:`color-${s.status}`},[t._v(" "+t._s(t.statuses[s.status])+" ")])]),e("td",{staticClass:"text-xs-right py-2 text-right"},[t._v(" "+t._s(s.price)+" ")])])]}},{key:"footer",fn:function({props:{options:s,pagination:r}}){return[e("div",{staticClass:"v-data-footer__wrapper d-flex align-center pl-2"},[e("div",{staticClass:"v-data-footer__info"},[t._v(" Всего: "+t._s(t.ordersList.length)+" "+t._s(t.declOfNum(t.ordersList.length,t.titles))+" ")]),e(Yt.Z,{staticClass:"flex-grow-1",attrs:{options:s,pagination:r,"items-per-page-text":"Строк на странице:","items-per-page-all-text":"Все","show-current-page":"","show-first-last-page":"","page-text":`${t.currentPage} из ${t.pageCount}`},on:{"update:options":t.footerUpdate}})],1)]}}])})},re=[],ae={name:"GGroomerServicesTable",props:{orders:{type:Array,default:()=>[]}},data:()=>({headers:[{text:"Дата",value:"date",width:140},{text:"Услуги",value:"services"},{text:"Продукты",value:"products"},{text:"Грумер",value:"groomer",width:200,align:"center"},{text:"Клиент",value:"client",width:200,align:"center"},{text:"Статус",value:"status",width:200,align:"center"},{text:"Стоимость, ₽",value:"price",width:130}],currentPage:0,itemsPerPage:15,pageCount:0,statuses:{success:"Выполнен",cancel:"Отменен",reserved:"Забронирован"},titles:["заказ","заказа","заказов"]}),computed:{ordersList(){return this.orders.reduce(((t,e)=>{const{updateDate:s,services:r,products:a,price:i,isSuccess:n,isCancel:l,isReserved:o,master:c,client:d}=e,u=r.map((({service:t})=>t.title)).join(", "),m=a.map((({product:t})=>t.title)).join(", ");let h="any";return l&&(h="cancel"),o&&!l&&(h="reserved"),n&&!l&&(h="success"),[...t,{date:new Date(s).toLocaleDateString(),services:u,products:m,status:h,price:i,groomer:c?`${c.username} ${c.lastname}`:"-",client:d?`${d.username} ${d.lastname}`:"-",data:e}]}),[])}},mounted(){},methods:{declOfNum:Et,setCurrentPage({page:t,pageCount:e}){this.currentPage=t,this.pageCount=e},footerUpdate({page:t,itemsPerPage:e}){this.currentPage=t,this.itemsPerPage=e},showDetail(t){this.$emit("onLineClick",t)}}},ie=ae,ne=(0,h.Z)(ie,se,re,!1,null,null,null),le=ne.exports,oe=function(){var t=this,e=t._self._c;return e(k.Z,{attrs:{"content-class":"g-detail-order-modal-shield",value:t.IS_DETAIL_ORDER_SHOW,"max-width":"60%"},on:{"click:outside":t.closeModal,keydown:t.onKeyDown}},[t.order?e(E.Z,{staticClass:"pt-4"},[e(x.EB,{staticClass:"px-8 mb-4 d-block"},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"text-h4"},[t._v(" Заказ - #"+t._s(t.order.id)+" ("+t._s(new Date(t.order.updateDate).toLocaleDateString())+") ")]),e(P.Z),e(_.Z,{attrs:{icon:"",large:""},on:{click:t.closeModal}},[e(O.Z,{attrs:{large:""}},[t._v("mdi-close")])],1)],1),e(b.Z)],1),e(x.ZB,{staticClass:"px-5"},[e(S.Z,[e(w.Z,[e(y.Z,[e(Zt.Z,{attrs:{value:t.order.master,items:t.groomersList,disabled:"",label:"Грумер",color:"#FFC11C","item-color":"warning"}})],1),e(y.Z,[e(Zt.Z,{attrs:{value:t.order.client,items:t.clientsList,disabled:"",label:"Клиент",color:"#FFC11C","item-color":"warning"}})],1),e(y.Z)],1),e(Ct.Z,{staticClass:"g-groomer-services-table",attrs:{"items-per-page":100,headers:t.headers,items:t.tableListData,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка",color:"#FFC11C","hide-default-footer":""},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[e("tr",{staticClass:"pointer",on:{click:function(e){return t.showDetail(s.data)}}},[e("td",{staticClass:"py-2"},[t._v(" "+t._s(s.title)+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.count)+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.price)+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.fullPrice)+" ")])])]}}],null,!1,1225368931)})],1)],1),e(x.h7,{staticClass:"pb-8 px-8"},[e(P.Z),e("span",{staticClass:"text-h6 font-weight-bold mr-4"},[t._v(" Всего: "+t._s(t.fullPrice)+"р ")]),e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"red lighten-1",dark:"",tile:"",outlined:"",elevation:"0"},on:{click:t.cancelOrder}},[t._v(" Отменить ")]),t.isOrderComplete?e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"#FFC11C",tile:"",dark:"",elevation:"0"},on:{click:t.toNewOrder}},[t._v(" Повторить ")]):t._e(),t.isOrderReserved?e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"green lighten-1",dark:"",tile:"",elevation:"0"},on:{click:t.toUpdateOrder}},[t._v(" Изменить ")]):t._e(),t.isOrderReserved?e(_.Z,{staticClass:"px-6 ml-4",attrs:{color:"orange lighten-1",dark:"",tile:"",elevation:"0"},on:{click:t.payForOrder}},[t._v(" Оплатить ")]):t._e()],1)],1):t._e()],1)},ce=[];const de=t=>{const{master:e,client:s,products:r,services:a}=t,i={};let n=[];return e&&(i.masterId=e),s&&(i.clientId=s),a?.length&&(n=[...n,...a?.map((({count:t,id:e,service:s})=>({count:t,id:s.id,orderId:e,type:"service"})))]),r?.length&&(n=[...n,...r?.map((({count:t,id:e,product:s})=>({count:t,id:s.id,orderId:e,type:"product"})))]),n.length&&(i.orderItems=n),i};var ue={name:"GDetailOrderModalShield",data:()=>({order:null,oldOrder:null,headers:[{text:"Название",value:"title"},{text:"Количество",value:"count",width:130},{text:"Сумма ₽, шт",value:"price",width:130},{text:"Всего ₽",value:"fullPrice",width:130}],statuses:{success:"Выполнен",cancel:"Отменен",reserved:"Забронирован"}}),computed:{...(0,St.Se)(["IS_DETAIL_ORDER_SHOW","DETAIL_ORDER_SHIELD_DATA","GROOMERS","CLIENTS"]),isOrderComplete(){return this.order.isCancel||this.order.isSuccess},isOrderReserved(){return!this.order.isCancel&&!this.order.isSuccess},groomersList(){return this.GROOMERS.map((({id:t,username:e,lastname:s})=>({text:`${e} ${s}`,value:t})))},clientsList(){return this.CLIENTS.map((({id:t,username:e,lastname:s})=>({text:`${e} ${s}`,value:t})))},tableListData(){const t=[];for(let{count:e,service:s}of this.order?.services)t.push({title:s.title,count:e,price:s.price,fullPrice:e*+yt(s.price),type:"service",data:s});for(let{count:e,product:s}of this.order?.products)t.push({title:s.title,count:e,price:s.price,fullPrice:e*+yt(s.price),type:"product",data:s});return t},fullPrice(){return this.order?.services.reduce(((t,{count:e,service:s})=>t+ +yt(s.price)*e),0)+this.order?.products.reduce(((t,{count:e,product:s})=>t+ +yt(s.price)*e),0)}},watch:{DETAIL_ORDER_SHIELD_DATA(t){if(!t)return this.oldOrder=null,void(this.order=null);const{master:e,client:s,...r}=this.DETAIL_ORDER_SHIELD_DATA,a={...r,master:e?.id||"",client:s?.id||""};this.oldOrder=a,this.order=JSON.parse(JSON.stringify(a))}},mounted(){},methods:{...(0,St.OI)(["CLOSE_ORDER_DETAIL_SHIELD","SHOW_ORDER_FORM"]),...(0,St.nv)(["PAY_FOR_ORDER","CANCEL_ORDER"]),parsePrice:yt,closeModal(){this.CLOSE_ORDER_DETAIL_SHIELD()},onKeyDown({keyCode:t}){27===t&&this.CLOSE_ORDER_DETAIL_SHIELD()},toNewOrder(){const t=de(this.order);this.SHOW_ORDER_FORM(t),this.CLOSE_ORDER_DETAIL_SHIELD()},async payForOrder(){confirm("Оплатить заказ?")&&(await this.PAY_FOR_ORDER(this.order.id),this.CLOSE_ORDER_DETAIL_SHIELD())},toUpdateOrder(){const t=de(this.order);t.orderId=this.order.id,this.SHOW_ORDER_FORM(t),this.CLOSE_ORDER_DETAIL_SHIELD()},cancelOrder(){confirm("Отменить заказ?")&&(this.CANCEL_ORDER(this.order.id),this.CLOSE_ORDER_DETAIL_SHIELD())}}},me=ue,he=(0,h.Z)(me,oe,ce,!1,null,null,null),ve=he.exports,pe=s(5808),ge=s(4525),Ce=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-stock-products-table d-flex flex-column"},[e(w.Z,{staticClass:"flex-grow-0 my-0 mb-5"},[e(y.Z,{staticClass:"py-0",attrs:{cols:"3"}},[e(D.Z,{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Поиск товара","single-line":"","hide-details":"",color:"#FFC11C",filled:"",dense:""},model:{value:t.searchStr,callback:function(e){t.searchStr=e},expression:"searchStr"}})],1)],1),e(Ct.Z,{staticClass:"flex-grow-1",attrs:{"items-per-page":t.itemsPerPage,headers:t.headers,items:t.currentProducts,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка","hide-default-footer":"",page:t.currentPage},on:{pagination:t.setCurrentPage},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[+t.writableProductId===+s.id&&t.currentProduct?e("tr",[e("td",{staticClass:"g-stock__td text-xs-right py-2"},[e("span",[t._v(t._s(s.id))])]),e("td",{staticClass:"g-stock-services-table__td py-2"},[t.previewImage||t.currentProduct.img?e(o.Z,{staticClass:"mx-auto pointer",attrs:{contain:"",src:t.previewImage||`${t.API_URL+t.MEDIAFILES}/${t.currentProduct.img}`,"max-height":"38","max-width":"38"},on:{click:t.loadImage}}):e("div",{staticClass:"g-stock-services-table__image-wrapper mx-auto pointer",on:{click:t.loadImage}}),e("input",{ref:"avatar",attrs:{type:"file",name:"images",multiple:"",accept:".jpg,.png",hidden:""},on:{change:t.onUploadImages}})],1),t._l(["vendorCode","title","count","price"],(function(s){return e("td",{key:s,staticClass:"g-stock__td text-xs-right py-2"},[e(D.Z,{attrs:{filled:"",dense:"",color:"#FFC11C",light:"","hide-details":"",type:["price","count"].includes(s)?"number":"text"},model:{value:t.currentProduct[s],callback:function(e){t.$set(t.currentProduct,s,e)},expression:"currentProduct[key]"}})],1)})),e("td",{staticClass:"g-stock__td text-xs-right py-2 d-flex flex-column"},[e("div",{staticClass:"d-flex align-center"},[e(Z.Z,{staticClass:"lex-grow-1",attrs:{filled:"",color:"#FFC11C",light:"","hide-details":"","no-resize":"",rows:"3"},model:{value:t.currentProduct.description,callback:function(e){t.$set(t.currentProduct,"description",e)},expression:"currentProduct.description"}}),e("div",{staticClass:"py-2 ml-4"},[e(_.Z,{staticClass:"flex-grow-1 mb-2",attrs:{elevation:"0",block:""},on:{click:t.cancelWritingProducts}},[t._v(" Отменить ")]),e(_.Z,{staticClass:"flex-grow-1",attrs:{elevation:"0",color:"#FFC11C",tile:"",dark:"",block:""},on:{click:t.saveProduct}},[t._v(" Сохранить ")])],1)],1)])],2):e("tr",{staticClass:"pointer",on:{contextmenu:function(e){return e.preventDefault(),t.$emit("writeProduct",s.id)}}},[e("td",{staticClass:"g-stock__td py-2"},[e("span",[t._v(t._s(s.id))])]),e("td",{staticClass:"g-stock__td py-2"},[s.img?e(o.Z,{staticClass:"mx-auto",attrs:{contain:"","lazy-src":`${t.API_URL+t.MEDIAFILES}/${s.img}`,src:`${t.API_URL+t.MEDIAFILES}/${s.img}`,"max-height":"38","max-width":"38"}}):t._e()],1),t._l(["vendorCode","title"],(function(r){return e("td",{key:r,staticClass:"g-stock__td text-xs-right py-2"},[e("span",[t._v(t._s(s[r]))])])})),e("td",{staticClass:"g-stock__td py-2"},[e("span",[t._v(t._s(s.count))])]),e("td",{staticClass:"g-stock__td py-2"},[e("span",[t._v(t._s(s.price))])]),e("td",{staticClass:"g-stock__td text-xs-right py-2"},[e("div",{staticClass:"d-flex align-center"},[e("div",{staticClass:"flex-grow-1"},[t._v(" "+t._s(s.description)+" ")]),e(T.Z,{attrs:{"open-on-hover":"","offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:r}){return[e(O.Z,t._g(t._b({},"v-icon",r,!1),s),[t._v(" mdi-dots-horizontal ")])]}}],null,!0)},[e(pe.Z,[e(ge.Z,{on:{click:function(e){return t.$emit("writeProduct",s.id)}}},[e(O.Z,{staticClass:"mr-3"},[t._v(" mdi-pencil-outline ")]),t._v(" Изменить ")],1),e(ge.Z,{on:{click:function(e){return t.$emit("removeProduct",s.id)}}},[e(O.Z,{staticClass:"mr-3"},[t._v(" mdi-trash-can-outline ")]),t._v(" Удалить ")],1)],1)],1)],1)])],2)]}},{key:"footer",fn:function({props:{options:s,pagination:r}}){return[e("div",{staticClass:"v-data-footer__wrapper d-flex align-center pl-2"},[e("div",{staticClass:"v-data-footer__info"},[t._v(" Всего: "+t._s(t.currentProducts.length)+" "+t._s(t.declOfNum(t.currentProducts.length,t.titles))+" ")]),e(Yt.Z,{staticClass:"flex-grow-1",attrs:{options:s,pagination:r,"items-per-page-text":"Строк на странице:","items-per-page-all-text":"Все","show-current-page":"","show-first-last-page":"","page-text":`${t.currentPage} из ${t.pageCount}`},on:{"update:options":t.footerUpdate}})],1)]}}])})],1)},fe=[];const _e="https://groomleta.ru",Ee="/mediafiles",xe={image:null,previewImage:null,searchStr:"",currentPage:0,pageCount:0,currentProduct:{}};var ye={name:"GStockProductsTable",props:["products","selectedProduct","writableProductId","oldProduct"],data:()=>({API_URL:_e,MEDIAFILES:Ee,searchStr:"",currentPage:0,itemsPerPage:15,pageCount:0,newProduct:null,currentProduct:{},headers:[{text:"ID",value:"id",width:70,align:"center"},{text:"Превью",value:"img",width:100,align:"center"},{text:"Артикул",value:"vendorCode",width:100},{text:"Название",value:"title"},{text:"Количество",value:"count",width:130,align:"end"},{text:"Цена, руб",value:"price",width:130,align:"end"},{text:"Описание",value:"description",width:"40%"}],image:null,previewImage:null,titles:["товар","товара","товаров"]}),computed:{currentProducts(){return this.products.filter((t=>t.title.toLowerCase().includes(this.searchStr)||t.vendorCode.toLowerCase().includes(this.searchStr)))}},watch:{selectedProduct(t){this.currentProduct={...t}}},methods:{declOfNum:Et,setCurrentPage({page:t,pageCount:e}){this.currentPage=t,this.pageCount=e},async saveProduct(){if(!this.currentProduct?.title)return;const t=this.currentProduct;if(-1===t.id){const e={title:t.title,vendorCode:t.vendorCode||"",count:+t.count||0,price:+t.price||0,description:t.description||"",img:this.image||null};this.$emit("createProduct",e)}else{const e={};if(this.oldProduct.title!==t.title&&(e.title=t.title?.trim()),this.oldProduct.vendorCode!==t.vendorCode&&(e.vendorCode=t.vendorCode?.trim()),+this.oldProduct.count!==+t.count&&(e.count=+t.count),+this.oldProduct.price!==+t.price&&(e.price=+t.price),this.oldProduct.description!==t.description&&(e.description=t.description?.trim()),this.image&&(e.img=this.image),!Object.keys(e).length)return this.$emit("cancelWritingProduct");this.$emit("updateProduct",t.id,e)}this.cancelWritingProducts()},loadImage(){this.$refs.avatar.click()},async onUploadImages({target:t}){const e=t.files[0];this.image=e,this.previewImage=URL.createObjectURL(this.image)},cancelWritingProducts(){for(let t in xe)this[t]=xe[t];this.$emit("cancelWritingProduct")},footerUpdate({page:t,itemsPerPage:e}){this.currentPage=t,this.itemsPerPage=e}}},Se=ye,ke=(0,h.Z)(Se,Ce,fe,!1,null,null,null),be=ke.exports,Oe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-stock-services-table d-flex flex-column"},[e(w.Z,{staticClass:"flex-grow-0 my-0 mb-5"},[e(y.Z,{staticClass:"py-0",attrs:{cols:"3"}},[e(D.Z,{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Поиск услуги","single-line":"","hide-details":"",color:"#FFC11C",filled:"",dense:""},model:{value:t.searchStr,callback:function(e){t.searchStr=e},expression:"searchStr"}})],1)],1),e(Ct.Z,{staticClass:"flex-grow-1",attrs:{"items-per-page":t.itemsPerPage,headers:t.headers,items:t.currentServices,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка","hide-default-footer":"",page:t.currentPage},on:{pagination:t.setCurrentPage},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[+t.writableServiceId===+s.id&&t.currentService?e("tr",[e("td",{staticClass:"g-stock-services-table__td py-2"},[e("span",[t._v(t._s(s.id))])]),e("td",{staticClass:"g-stock-services-table__td py-2"},[e(D.Z,{ref:"title",attrs:{filled:"",dense:"",color:"#FFC11C",light:"",type:"text",rules:[()=>!!t.currentService.title||"Введите название"]},model:{value:t.currentService.title,callback:function(e){t.$set(t.currentService,"title",e)},expression:"currentService.title"}})],1),e("td",{staticClass:"g-stock-services-table__td py-2"},[e(Z.Z,{staticClass:"lex-grow-1",attrs:{filled:"",color:"#FFC11C",light:"","hide-details":"","no-resize":"",rows:"3"},model:{value:t.currentService.text,callback:function(e){t.$set(t.currentService,"text",e)},expression:"currentService.text"}})],1),e("td",{staticClass:"g-stock-services-table__td text-xs-right py-2"},[e(Zt.Z,{attrs:{items:t.animalsList,filled:"",dense:"",color:"#FFC11C",light:"","hide-details":"","item-color":"warning"},model:{value:t.currentService.animal,callback:function(e){t.$set(t.currentService,"animal",e)},expression:"currentService.animal"}})],1),e("td",{staticClass:"g-stock-services-table__td text-xs-right py-2"},[e(D.Z,{attrs:{filled:"",dense:"",color:"#FFC11C",light:"","hide-details":"",type:"text"},model:{value:t.currentService.price,callback:function(e){t.$set(t.currentService,"price",e)},expression:"currentService.price"}})],1),e("td",{staticClass:"g-stock-services-table__td text-xs-right py-2"},[e(D.Z,{attrs:{filled:"",dense:"",color:"#FFC11C",light:"","hide-details":"",type:"text"},model:{value:t.currentService.time,callback:function(e){t.$set(t.currentService,"time",e)},expression:"currentService.time"}})],1),e("td",{staticClass:"g-stock-services-table__td py-2"},[t.previewImage||t.currentService.img?e(o.Z,{staticClass:"mx-auto pointer",attrs:{contain:"",src:t.previewImage||s.img,"max-height":"38","max-width":"38"},on:{click:t.loadImage}}):e("div",{staticClass:"g-stock-services-table__image-wrapper mx-auto pointer",on:{click:t.loadImage}}),e("input",{ref:"avatar",attrs:{type:"file",name:"images",multiple:"",accept:".svg",hidden:""},on:{change:t.onUploadImages}})],1),e("td",{staticClass:"g-stock-services-table__td py-2"},[e(f.Z,{ref:"category",attrs:{items:t.categoriesForSelect,color:"#FFC11C",light:"",dense:"",filled:"","auto-select-first":"","item-color":"warning",rules:[()=>!!t.currentService.categoryId||"Выберите категорию"]},scopedSlots:t._u([{key:"append-item",fn:function(){return[e(_.Z,{staticClass:"justify-start",attrs:{elevation:"0",tile:"",small:"",block:""}},[e(O.Z,{staticClass:"mr-2"},[t._v("mdi-plus")]),e("span",{staticClass:"text-caption"},[t._v("Добавить")])],1)]},proxy:!0}],null,!0),model:{value:t.currentService.categoryId,callback:function(e){t.$set(t.currentService,"categoryId",e)},expression:"currentService.categoryId"}})],1),e("td",{staticClass:"g-stock-services-table__td py-2"},[e("div",{staticClass:"d-flex justify-space-between"},[e(f.Z,{ref:"breed",attrs:{items:t.breedsForSelect,color:"#FFC11C",light:"",dense:"",filled:"","auto-select-first":"","item-color":"warning",rules:[()=>!!t.currentService.breedId||"Выберите породу"]},scopedSlots:t._u([{key:"append-item",fn:function(){return[e(_.Z,{staticClass:"justify-start",attrs:{elevation:"0",tile:"",small:"",block:""}},[e(O.Z,{staticClass:"mr-2"},[t._v("mdi-plus")]),e("span",{staticClass:"text-caption"},[t._v(" Добавить ")])],1)]},proxy:!0}],null,!0),model:{value:t.currentService.breedId,callback:function(e){t.$set(t.currentService,"breedId",e)},expression:"currentService.breedId"}}),e("div",{staticClass:"ml-4 d-flex flex-column"},[e(_.Z,{staticClass:"mb-1",attrs:{elevation:"0",color:"#FFC11C",tile:"",dark:""},on:{click:t.saveService}},[t._v(" Сохранить ")]),e(_.Z,{attrs:{elevation:"0",tile:""},on:{click:t.cancelWritingService}},[t._v(" Отменить ")])],1)],1)])]):e("tr",{staticClass:"pointer",on:{contextmenu:function(e){return e.preventDefault(),t.$emit("writeService",s.id)}}},[e("td",{staticClass:"g-stock-services-table__td py-2"},[e("span",[t._v(t._s(s.id))])]),e("td",{staticClass:"g-stock-services-table__td py-2"},[e("span",[t._v(t._s(s.title))])]),e("td",{staticClass:"g-stock-services-table__td py-2"},[e("span",[t._v(t._s(s.text))])]),e("td",{staticClass:"g-stock-services-table__td py-2"},[e("span",[t._v(t._s(t.animals[s.animal]))])]),e("td",{staticClass:"g-stock-services-table__td py-2"},[e("span",[t._v(t._s(s.price))])]),e("td",{staticClass:"g-stock-services-table__td py-2"},[e("span",[t._v(t._s(s.time))])]),e("td",{staticClass:"g-stock-services-table__td py-2"},[e(o.Z,{staticClass:"mx-auto",attrs:{contain:"","lazy-src":s.img,src:s.img,"max-height":"38","max-width":"38"}})],1),e("td",{staticClass:"g-stock-services-table__td py-2"},[e("span",[t._v(t._s(s.category.title))])]),e("td",{staticClass:"g-stock-services-table__td py-2 text-right"},[e("div",{staticClass:"float-left"},[t._v(" "+t._s(s.breed.title)+" ")]),e(T.Z,{attrs:{"open-on-hover":"","offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:r}){return[e(O.Z,t._g(t._b({},"v-icon",r,!1),s),[t._v(" mdi-dots-horizontal ")])]}}],null,!0)},[e(pe.Z,[e(ge.Z,{on:{click:function(e){return t.$emit("writeService",s.id)}}},[e(O.Z,{staticClass:"mr-3"},[t._v(" mdi-pencil-outline ")]),t._v(" Изменить ")],1),e(ge.Z,{on:{click:function(e){return t.$emit("removeService",s.id)}}},[e(O.Z,{staticClass:"mr-3"},[t._v(" mdi-trash-can-outline ")]),t._v(" Удалить ")],1)],1)],1)],1)])]}},{key:"footer",fn:function({props:{options:s,pagination:r}}){return[e("div",{staticClass:"v-data-footer__wrapper d-flex align-center pl-2"},[e("div",{staticClass:"v-data-footer__info"},[t._v(" Всего: "+t._s(t.currentServices.length)+" "+t._s(t.declOfNum(t.currentServices.length,t.titles))+" ")]),e(Yt.Z,{staticClass:"flex-grow-1",attrs:{options:s,pagination:r,"items-per-page-text":"Строк на странице:","items-per-page-all-text":"Все","show-current-page":"","show-first-last-page":"","page-text":`${t.currentPage} из ${t.pageCount}`},on:{"update:options":t.footerUpdate}})],1)]}}])})],1)},Te=[];function we(t){let e=!1,s=Array.isArray(t)?t:Object.keys(t);return s.forEach((t=>{const s=this.$refs[t].validate(!0);s||(e=!0)})),e}const Pe="https://groomleta.ru",De="/mediafiles",Ze={CAT:"кот",DOG:"собака",ANY:"не задано"},Ie={image:null,previewImage:null,searchStr:"",currentPage:0,pageCount:0,currentService:{}};var Ae={name:"GStockServicesTable",props:["services","writableServiceId","selectedService","oldService","categories","breeds"],data:()=>({image:null,previewImage:null,animals:Ze,searchStr:"",headers:[{text:"ID",value:"id",width:70,align:"center"},{text:"Название",value:"title",width:230},{text:"Описание",value:"text"},{text:"Животное",value:"animal",width:130},{text:"Цена",value:"price",width:130},{text:"Продолж.",value:"time",width:130},{text:"Иконка",value:"img",width:130,align:"center"},{text:"Категория",value:"category",width:200},{text:"Порода",value:"breed",width:400}],animalsList:[{text:"кот",value:"CAT"},{text:"собака",value:"DOG"},{text:"не задано",value:"ANY"}],currentPage:0,itemsPerPage:15,pageCount:0,currentService:{},titles:["услуга","услуги","услуг"]}),computed:{currentServices(){return this.services.filter((({title:t})=>t.toLowerCase().includes(this.searchStr))).map((({img:t,...e})=>({...e,img:Pe+De+"/"+t})))},categoriesForSelect(){return this.categories.map((({id:t,title:e})=>({value:t,text:e})))},breedsForSelect(){return this.breeds.map((({id:t,title:e})=>({value:t,text:e})))}},watch:{selectedService(t){if(!t)return{};this.currentService={...t,categoryId:t.category?.id||null,breedId:t.breed?.id||null}}},mounted(){},methods:{declOfNum:Et,setCurrentPage({page:t,pageCount:e}){this.currentPage=t,this.pageCount=e},saveService(){const t=we.call(this,["title","category","breed"]);if(t)return;const e=this.currentService;if(-1===e.id){const t={title:e.title?.trim()||"",text:e.text?.trim()||"",animal:e.animal?.toLowerCase()||"any",price:e.price?.trim()||"от 1",time:e.time?.trim()||"",img:this.image||null,category:e.categoryId||"",breed:e.breedId||""};this.$emit("createService",t)}else{const t={};if(this.oldService.title!==e.title&&(t.title=e.title?.trim()),this.oldService.text!==e.text&&(t.text=e.text?.trim()),this.oldService.animal!==e.animal&&(t.animal=e.animal?.toLowerCase()),this.oldService.price!==e.price&&(t.price=e.price?.trim()),this.oldService.time!==e.time&&(t.time=e.time?.trim()),this.oldService.category.id!==e.categoryId&&(t.category=e.categoryId),this.oldService.breed.id!==e.breedId&&(t.breed=e.breedId),this.image&&(t.img=this.image),!Object.keys(t).length)return this.cancelWritingService();this.$emit("updateService",e.id,t)}this.cancelWritingService()},loadImage(){this.$refs.avatar.click()},async onUploadImages({target:t}){const e=t.files[0];this.image=e,this.previewImage=URL.createObjectURL(this.image)},cancelWritingService(){for(let t in Ie)this[t]=Ie[t];this.$emit("cancelWritingService")},footerUpdate({page:t,itemsPerPage:e}){this.currentPage=t,this.itemsPerPage=e}}},Re=Ae,Fe=(0,h.Z)(Re,Oe,Te,!1,null,null,null),Le=Fe.exports,$e={name:"MainLayout",components:{GCreateOrderModalForm:Dt,GDetailOrderModalShield:ve},data:()=>({links:[{id:0,title:"Календарь",url:"/"},{id:1,title:"Склад",url:"/stock"},{id:2,title:"Заказы",url:"/orders"},{id:3,title:"Клиенты",url:"/clients"},{id:4,title:"Отзывы",url:"/feedbacks"},{id:5,title:"Грумеры",url:"/groomers"}],logoIcon:s(9574),logoutIcon:s(5053)}),mounted(){this.GET_SERVICES(),this.GET_ALL_GROOMERS(),this.GET_ALL_CLIENTS(),this.GET_ALL_PRODUCTS()},methods:{...(0,St.nv)(["LOGOUT","GET_SERVICES","GET_ALL_GROOMERS","GET_ALL_CLIENTS","GET_ALL_PRODUCTS"]),async logout(){const{status:t}=await this.LOGOUT();"success"===t&&this.$router.push({name:"g-login"})}}},Me=$e,Ge=(0,h.Z)(Me,g,C,!1,null,null,null),Ne=Ge.exports,Ue=r.ZP.extend({name:"App",components:{EmptyLayout:p,MainLayout:Ne},computed:{layout(){const t=this.$route.meta?.layout||"empty";return`${t}-layout`}}}),Ve=Ue,Be=(0,h.Z)(Ve,i,n,!1,null,null,null),We=Be.exports,qe=s(5205);(0,qe.z)("/crm/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});s(1703);class je{static login(t){const{username:e,password:s}=t;if(!e&&!s)throw"User data not found";return ps({key:"User.login",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\ttokenAuth(\n\t\t\t\t\t\t\tusername: "${e}",\n\t\t\t\t\t\t\tpassword: "${s}"\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttoken\n\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t\trefreshExpiresIn\n\t\t\t\t\t\t\trefreshToken\n\t\t\t\t\t\t}\n\t\t\t\t}`}})}static validateToken(t){return t?ps({key:"User.validateToken",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tverifyToken(token: "${t}") {\n\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t}\n\t\t\t\t}`}}):null}static updateRefreshToken(t){return t?ps({key:"User.getRefreshToken",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\trefreshToken(\n\t\t\t\t\t\t\trefreshToken: "${t}",\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttoken\n\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t\trefreshExpiresIn\n\t\t\t\t\t\t\trefreshToken\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}}):null}static revokeRefreshToken(t){return t?ps({key:"User.logout",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\trevokeToken(\n\t\t\t\t\t\t\trefreshToken: "${t}",\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trevoked\n\t\t\t\t\t\t}\n\t\t\t\t}`}}):null}}var He=je;const Ke="https://groomleta.ru";class Ye{static fetchAllMasters(){return ps({key:"Master.fetchAllMasters",query:{query:"\n\t\t\t\t\tquery {\n\t\t\t\t\t\tallGroomers {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\tavatar\n\t\t\t\t\t\t\teducation\n\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\tpost\n\t\t\t\t\t\t\tcolor\n\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\trate\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t"}})}static fetchMasterById(t){if(!t)throw"Groomer ID exist";return ps({key:"Master.fetchMasterById",query:{query:`\n\t\t\t\t\tquery {\n\t\t\t\t\t\tmasterById(id: "${t}") {\n\t\t\t\t\t\t\tmaster {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tavatar\n\t\t\t\t\t\t\t\teducation\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tpost\n\t\t\t\t\t\t\t\tcolor\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\trate\n\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallOrders {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tservices {\n\t\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\t\tservice {\n\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tproducts {\n\t\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\t\tproduct {\n\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmaster {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclient {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\tisSuccess\n\t\t\t\t\t\t\t\tisCancel\n\t\t\t\t\t\t\t\tisReserved\n\t\t\t\t\t\t\t\tupdateDate\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}})}static createMaster(t){const e=Object.keys(t).reduce(((e,s)=>"rate"===s?e+`${s}: ${t[s]}\n`:"comment"===s?e+`${s}: "${t[s]?.replaceAll("\n","\\n")}"\n`:e+`${s}: "${t[s]}"\n`),"");return ps({key:"Master.createMaster",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tcreateMaster (\n\t\t\t\t\t\t\tmasterData: {\n\t\t\t\t\t\t\t\t${e}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tmaster {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallMasters {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tavatar\n\t\t\t\t\t\t\t\teducation\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tpost\n\t\t\t\t\t\t\t\tcolor\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\trate\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static updateMaster(t,e){const s=Object.keys(e).reduce(((t,s)=>"rate"===s?t+`${s}: ${e[s]}\n`:"comment"===s?t+`${s}: "${e[s]?.replaceAll("\n","\\n")}"\n`:t+`${s}: "${e[s]}"\n`),"");return ps({key:"Master.updateMaster",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tupdateMaster (\n\t\t\t\t\t\t\tid: "${t}",\n\t\t\t\t\t\t\tmasterData: {\n\t\t\t\t\t\t\t\t${s}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tmaster {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tavatar\n\t\t\t\t\t\t\t\teducation\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tpost\n\t\t\t\t\t\t\t\tcolor\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\trate\n\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallMasters {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tavatar\n\t\t\t\t\t\t\t\teducation\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tpost\n\t\t\t\t\t\t\t\tcolor\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\trate\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static uploadAvatar(t,e){const s=new FormData;s.append("id",t),s.append("file",e);const a=r.ZP.$cookies.get("JWTToken");try{return fetch(Ke+"/api/upload-master-avatar",{method:"POST",headers:{Authorization:`JWT ${a||""}`},body:s}).then((t=>(console.log("response",t),t.json()))).then((t=>(console.log("json",t),t))).catch((t=>(console.log("Master.uploadAvatar response:",t),{master:null})))}catch(i){return console.log("Master.uploadAvatar response:",i),{master:null}}}}var Je=Ye;const ze="https://groomleta.ru";class Qe{static fetchAllServices(){return ps({key:"Services.fetchAllServices",query:{query:`\n\t\t\t\t\tquery {\n\t\t\t\t\t\tallServices {\n\t\t\t\t\t\t\t${Xe}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static createService(t){const e=Object.keys(t).reduce(((e,s)=>"text"===s?e+`${s}: "${t[s]?.replaceAll("\n","\\n")}"\n`:e+`${s}: "${t[s]}"\n`),"");return ps({key:"Service.createService",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tcreateService (\n\t\t\t\t\t\t\tserviceData: {\n\t\t\t\t\t\t\t\t${e}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tservice {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t${Xe}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static updateService(t,e){const s=Object.keys(e).reduce(((t,s)=>"text"===s?t+`${s}: "${e[s]?.replaceAll("\n","\\n")}"\n`:t+`${s}: "${e[s]}"\n`),"");return ps({key:"Service.updateService",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tupdateService (\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t\tserviceData: {\n\t\t\t\t\t\t\t\t${s}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t${Xe}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static uploadImage(t,e){const s=new FormData;s.append("id",t),s.append("file",e);const a=r.ZP.$cookies.get("JWTToken");try{return fetch(ze+"/api/upload-service-img",{method:"POST",headers:{Authorization:`JWT ${a||""}`},body:s}).then((t=>t.json())).catch((t=>(console.log("Services.uploadImage response:",t),{master:null})))}catch(i){return console.log("Services.uploadImage response:",i),{master:null}}}static removeService(t){return ps({key:"Products.removeService",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tremoveService(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tsuccess\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}}const Xe="\nallServices {\n\tid\n\ttitle\n\ttext\n\tanimal\n\tprice\n\ttime\n\timg\n\tcategory {\n\t\tid\n\t\ttitle\n\t}\n\tbreed {\n\t\tid\n\t\ttitle\n\t}\n}\nallCategories {\n\tid\n\ttitle\n}\nallBreeds {\n\tid\n\ttitle\n}\n";class ts{static getEvents(){return ps({key:"Events.getEvents",query:{query:`\n\t\t\t\t\tquery {\n\t\t\t\t\t\tallEvents {${ss}}\n\t\t\t\t\t}`}})}static createEvent({title:t,startDate:e,endDate:s,services:r,client:a,master:i,comment:n}){return ps({key:"Events.getEvents",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tcreateEvent(\n\t\t\t\t\t\t\teventData: {\n\t\t\t\t\t\t\t\ttitle: "${t}"\n\t\t\t\t\t\t\t\tstartDate: "${e}"\n\t\t\t\t\t\t\t\tendDate: "${s}"\n\t\t\t\t\t\t\t\tservices: [${r?.join(",")||""}]\n\t\t\t\t\t\t\t\tclient: "${a||""}"\n\t\t\t\t\t\t\t\tmaster: "${i||""}"\n\t\t\t\t\t\t\t\tcomment: "${n?.replaceAll("\n","\\n")}"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  ) {\n\t\t\t\t\t\t\tevent {${ss}}\n\t\t\t\t\t\t\tallEvents {${ss}}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static updateEvent({id:t,data:e}){if(!t||!e)return console.warn("event id or data is undefined");const s=Object.keys(e).reduce(((t,s)=>"services"===s?t+`\nservices: [${e.services.join(",")||""}]`:"comment"===s?t+`\ncomment: "${e.comment?.replaceAll("\n","\\n")}"`:t+`\n${s}: "${e[s]||""}"`),"");return ps({key:"Events.getEvents",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tupdateEvent(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t\teventData: {${s}}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tevent {${ss}}\n\t\t\t\t\t\t\tallEvents {${ss}}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static removeEvent(t){return t?ps({key:"Events.removeEvent",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tremoveEvent(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tevent {${ss}}\n\t\t\t\t\t\t\tallEvents {${ss}}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}}):console.warn("event id is undefined")}static successEvent(t){return console.log("id",t),t?ps({key:"Events.successEvent",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tsuccessEvent(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tevent {${ss}}\n\t\t\t\t\t\t\tallEvents {${ss}}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}}):console.warn("event id is undefined")}}var es=ts;const ss="\nid\ntitle\nstartDate\nendDate\nclient {\n\tid\n\tusername\n\tlastname\n\tphone\n\tisBlocked\n}\nservices {\n\tid\n\ttitle\n\tbreed {\n\t\tid\n\t\ttitle\n\t}\n}\nmaster {\n\tid\n\tusername\n\tlastname\n\tcolor\n}\ncomment\ncreateDate\nisSuccess\n";class rs{static fetchAllClients(){return ps({key:"Clients.fetchAllClients",query:{query:"\n\t\t\t\t\tquery {\n\t\t\t\t\t\tallClients {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\tanimal\n\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\tisBlocked\n\t\t\t\t\t\t}\n\t\t\t\t\t}"}})}static createClient(t){const e=Object.keys(t).reduce(((e,s)=>["comment","animal"].includes(s)?e+`${s}: "${t[s]?.replaceAll("\n","\\n")}"`:e+`${s}: "${t[s]}"`),"");return ps({key:"Clients.createClient",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tcreateClient(\n\t\t\t\t\t\t\tclientData: {\n\t\t\t\t\t\t\t\t${e}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tclient {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallClients {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t\tanimal\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\tisBlocked\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static updateClient(t,e){const s=Object.keys(e).reduce(((t,s)=>["comment","animal"].includes(s)?t+`${s}: "${e[s]?.replaceAll("\n","\\n")}"`:t+`${s}: "${e[s]}"`),"");return ps({key:"Clients.updateClient",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tupdateClient(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t\tclientData: {\n\t\t\t\t\t\t\t\t${s}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tclient {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t\tanimal\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\tisBlocked\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallClients {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t\tanimal\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\tisBlocked\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static removeClient(t){return ps({key:"Clients.removeClient",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tremoveClient(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tclient {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallClients {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t\tanimal\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\tisBlocked\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsuccess\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static putToBlock(t){return ps({key:"Clients.putToBlock",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tputToBlock(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tclient {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallClients {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t\tanimal\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\tisBlocked\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static fetchClientById(t){if(!t)throw"Client ID exist";return ps({key:"client.fetchClientById",query:{query:`\n\t\t\t\t\tquery {\n\t\t\t\t\t\tclientById(id: "${t}") {\n\t\t\t\t\t\t\tclient {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t\tanimal\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\taddress\n\t\t\t\t\t\t\t\tisBlocked\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallOrders {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tservices {\n\t\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\t\tservice {\n\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tproducts {\n\t\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\t\tproduct {\n\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmaster {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclient {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\tisSuccess\n\t\t\t\t\t\t\t\tisCancel\n\t\t\t\t\t\t\t\tisReserved\n\t\t\t\t\t\t\t\tupdateDate\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}})}}var as=rs;const is="https://groomleta.ru";class ns{static getProducts(){return ps({key:"Products.getProducts",query:{query:"\n\t\t\t\t\tquery {\n\t\t\t\t\t\tallProducts {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\tvendorCode\n\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\timg\n\t\t\t\t\t\t}\n\t\t\t\t\t}"}})}static createProduct(t){const e=Object.keys(t).reduce(((e,s)=>"description"===s?e+`${s}: "${t[s]?.replaceAll("\n","\\n")}"`:"number"===typeof t[s]?e+`${s}: ${t[s]}`:e+`${s}: "${t[s]}"`),"");return ps({key:"Products.createProduct",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tcreateProduct(\n\t\t\t\t\t\t\tproductData: {\n\t\t\t\t\t\t\t\t${e}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tproduct {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallProducts {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\tvendorCode\n\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\t\timg\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static updateProduct(t,e){const s=Object.keys(e).reduce(((t,s)=>"description"===s?t+`${s}: "${e[s]?.replaceAll("\n","\\n")}"`:"number"===typeof e[s]?t+`${s}: ${e[s]}`:t+`${s}: "${e[s]}"`),"");return ps({key:"Products.updateProduct",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tupdateProduct(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t\tproductData: {\n\t\t\t\t\t\t\t\t${s}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tproduct {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallProducts {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\tvendorCode\n\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\t\timg\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static removeProduct(t){return ps({key:"Products.removeProduct",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tremoveProduct(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tproduct {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallProducts {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\tvendorCode\n\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\t\timg\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsuccess\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}static uploadImage(t,e){const s=new FormData;s.append("id",t),s.append("file",e);const a=r.ZP.$cookies.get("JWTToken");try{return fetch(is+"/api/upload-product-img",{method:"POST",headers:{Authorization:`JWT ${a||""}`},body:s}).then((t=>t.json())).catch((t=>(console.log("Products.uploadImage response:",t),{master:null})))}catch(i){return console.log("Products.uploadImage response:",i),{master:null}}}}var ls=ns;class os{static fetchAllOrders(){return ps({key:"Order.fetchAllOrders",query:{query:`\n\t\t\t\t\tquery {\n\t\t\t\t\t\tallOrders {\n\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}})}static fetchOrderById(t){if(!t)throw"Groomer ID exist";return ps({key:"Order.fetchOrderById",query:{query:`\n\t\t\t\t\tquery {\n\t\t\t\t\t\torderById(id: "${t}") {\n\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}})}static createOrder(t){return ps({key:"Order.createOrder",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tcreateOrder(\n\t\t\t\t\t\t\torderData: {\n\t\t\t\t\t\t\t\t${us(t)}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\torder {\n\t\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallOrders {\n\t\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}})}static payForOrder(t){if(t)return ps({key:"Order.payForOrder",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tpayForOrder(\n\t\t\t\t\t\t\tid: ${t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\torder {\n\t\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallOrders {\n\t\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}})}static updateAndPayOrder(t,e){if(t)return console.log("orderData",e),ps({key:"Order.updateAndPayOrder",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tupdateAndPayOrder(\n\t\t\t\t\t\t\tid: ${t}\n\t\t\t\t\t\t\torderData: {\n\t\t\t\t\t\t\t\t${us(e)}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\torder {\n\t\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallOrders {\n\t\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}})}static cancelOrder(t){if(t)return ps({key:"Order.cancelOrder",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tcancelOrder(\n\t\t\t\t\t\t\tid: ${t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\torder {\n\t\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallOrders {\n\t\t\t\t\t\t\t\t${ds}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}})}}var cs=os;const ds="\nid\nprice\nclient { id }\nmaster { id }\nservices {\n\tid\n\tcount\n\tservice {\n\t\tid\n\t\ttitle\n\t\tprice\n\t}\n}\nproducts {\n\tid\n\tcount\n\tproduct {\n\t\tid\n\t\ttitle\n\t\tprice\n\t}\n}\nisSuccess\nisCancel\nisReserved\nupdateDate\ncreateDate\n",us=t=>`\n\tservices: [${t.services?.map((t=>`{\n\t\t\t\t\tid: "${t.id||""}",\n\t\t\t\t\tserviceId: ${t.serviceId},\n\t\t\t\t\tcount: ${t.count} \n\t\t\t\t}`)).join(",")}]\n\tproducts: [${t.products?.map((t=>`{\n\t\t\t\t\tid: "${t.id||""}",\n\t\t\t\t\tproductId: ${t.productId},\n\t\t\t\t\tcount: ${t.count} \n\t\t\t\t}`)).join(",")}]\n\tclient: "${t.clientId||""}"\n\tmaster: "${t.masterId||""}"\n\tprice: ${t.price}\n\tisSuccess: ${t.isSuccess||!1}\n\tisReserved: ${t.isReserved||!1}\n`;class ms{static getFeedbacks(){return ps({key:"Feedbacks.getFeedbacks",query:{query:"\n\t\t\t\t\tquery {\n\t\t\t\t\t\tallFeedbacks {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\tnick\n\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\tisApproved\n\t\t\t\t\t\t}\n\t\t\t\t\t}"}})}static updateFeedback(t,{isApproved:e}){return ps({key:"Feedbacks.updateFeedback",query:{query:`\n\t\t\t\t\tmutation {\n\t\t\t\t\t\tupdateFeedback(\n\t\t\t\t\t\t\tid: "${t}"\n\t\t\t\t\t\t\tfeedbackData: {\n\t\t\t\t\t\t\t\tisApproved: ${e}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tfeedback {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tallFeedbacks {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tnick\n\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\tcreateDate\n\t\t\t\t\t\t\t\tisApproved\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}`}})}}var hs=ms;const vs="https://groomleta.ru",ps=({key:t="",query:e})=>{const s=r.ZP.$cookies.get("JWTToken");try{return fetch(vs+"/graphql/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`JWT ${s||""}`},body:JSON.stringify(e||{})}).then((t=>{if(!t?.ok)throw new Error(t.statusText);return t.json()})).then((t=>t.data)).catch((e=>(console.warn(`${t} exeption:`,e),null)))}catch(a){return console.warn(`${t} exeption:`,a),new Promise((t=>t(null)))}};var gs={user:He,master:Je,services:Qe,events:es,clients:as,products:ls,order:cs,feedbacks:hs},Cs={state:()=>({}),mutations:{},actions:{async LOGIN({commit:t},e){try{const{tokenAuth:t}=await gs.user.login(e)||{},{token:s,refreshToken:a}=t||{};if(console.log("LOGIN token",s),!s)throw r.ZP.$cookies.remove("JWTToken"),new Error("token is null");return console.log("LOGIN token",s),r.ZP.$cookies.set("JWTToken",s,"120d"),r.ZP.$cookies.set("JWTRefreshToken",a,"124d"),{...Os,data:{token:s,refreshToken:a}}}catch(s){return console.error("action LOGIN exeption:",s),Ts}},async LOGOUT(){try{const t=r.ZP.$cookies.get("JWTRefreshToken"),e=await gs.user.revokeRefreshToken(t);return r.ZP.$cookies.remove("JWTToken"),{...Os,data:e}}catch(t){return Ts}},async CHECK_TOKEN(){try{const t=r.ZP.$cookies.get("JWTToken");if(!t)throw"JWT token missing";const{verifyToken:e}=await gs.user.validateToken(t);if(!e)throw"JWT token not valid";const{username:s,exp:a,origIat:i}=e.payload||{};if(i>3e8)return!0;const n=r.ZP.$cookies.get("JWTRefreshToken"),{refreshToken:l}=await gs.user.updateRefreshToken(n),{token:o,refreshToken:c}=l;return r.ZP.$cookies.set("JWTToken",o,"120d"),r.ZP.$cookies.set("JWTRefreshToken",c,"124d"),await gs.user.revokeRefreshToken(n),{...Os,data:{token:o,refreshToken:c}}}catch(t){return r.ZP.$cookies.remove("JWTToken"),r.ZP.$cookies.remove("JWTRefreshToken"),Ts}},CHECK_USER({commit:t}){const e=r.ZP.$cookies.get("JWTToken");return console.log("CHECK_USER token:",e),e}},getters:{}},fs={state:()=>({services:[],breeds:[],categories:[]}),mutations:{SET_SERVICES(t,e){t.services=e},SET_CATEGORIES(t,e){t.categories=e},SET_BREEDS(t,e){t.categories=e}},actions:{async GET_SERVICES({commit:t}){try{const{allServices:e}=await gs.services.fetchAllServices(),{allServices:s,allBreeds:r,allCategories:a}=e||{};return t("SET_SERVICES",s||[]),t("SET_CATEGORIES",a||[]),t("SET_BREEDS",r||[]),{...Os,data:e}}catch(e){return console.log("GET_SERVICES exeption:",e),Ts}},async CREATE_SERVICE({commit:t},e){try{const{createService:t}=await gs.services.createService(e);return{...Os,data:t}}catch(s){return console.log("CREATE_SERVICE exeption:",s),Ts}},async UPDATE_SERVICE({commit:t},{id:e,data:s}){try{const{updateService:t}=await gs.services.updateService(e,s);return{...Os,data:t}}catch(r){return console.log("UPDATE_SERVICE exeption:",r),Ts}},async REMOVE_SERVICE({commit:t},e){try{const{removeService:t}=await gs.services.removeService(e);return{...Os,data:t}}catch(s){return console.log("UPDATE_SERVICE exeption:",s),Ts}},UPLOAD_SERVICE_IMAGE({commit:t},{id:e,img:s}){try{return gs.services.uploadImage(e,s)}catch(r){return console.log("UPLOAD_SERVICE_IMAGE exeption:",r),Ts}}},getters:{SERVICES:t=>t.services,BREEDS:t=>t.breeds,CATEGORIES:t=>t.categories}},_s={state:()=>({groomers:[]}),mutations:{SET_GROOMERS(t,e){t.groomers=e}},actions:{async GET_ALL_GROOMERS({commit:t}){try{const{allGroomers:e}=await gs.master.fetchAllMasters();if(!e)throw"[GET_ALL_GROOMERS] allGroomers exist";return e?(t("SET_GROOMERS",e),{...Os,data:e}):Ts}catch{}},async GET_MASTER_BY_ID({commit:t},e){try{const{masterById:t}=await gs.master.fetchMasterById(e);if(!t)throw"[GET_MASTER_BY_ID] masterById exist";return console.log("masterById",t),{...Os,data:t}}catch(s){return Ts}},async CREATE_MASTER({commit:t},e){try{const{createMaster:s}=await gs.master.createMaster(e);return t("SET_GROOMERS",s?.allMasters||[]),{...Os,data:s?.allMasters}}catch(s){return console.log("CREATE_MASTER exeption:",s),Ts}},async UPDATE_MASTER({commit:t},{id:e,formData:s}){try{const{updateMaster:r}=await gs.master.updateMaster(e,s);return t("SET_GROOMERS",r?.allMasters||[]),{...Os,data:r?.master}}catch(r){return console.log("CREATE_MASTER exeption:",r),Ts}}},getters:{GROOMERS:t=>t.groomers}},Es={state:()=>({events:[]}),mutations:{SET_EVENTS(t,e){t.events=e}},actions:{async GET_EVENTS({commit:t}){try{const{allEvents:e}=await gs.events.getEvents();return t("SET_EVENTS",e),{...Os,data:e}}catch(e){return console.log("GET_EVENTS exeption:",e),Ts}},async CREATE_EVENT({commit:t},e){try{const{createEvent:s}=await gs.events.createEvent(e);return s?.allEvents&&t("SET_EVENTS",s.allEvents),{...Os,data:s}}catch(s){return console.log("CREATE_EVENT exeption:",s),Ts}},async UPDATE_EVENT({commit:t},{id:e,data:s}){try{const{updateEvent:r}=await gs.events.updateEvent({id:e,data:s});return r?.allEvents&&t("SET_EVENTS",r.allEvents),{...Os,data:r}}catch(r){return console.log("UPDATE_EVENT exeption:",r),Ts}},async REMOVE_EVENT({commit:t},e){try{const{removeEvent:s}=await gs.events.removeEvent(e);return s?.allEvents&&t("SET_EVENTS",s.allEvents),{...Os,data:s}}catch(s){return console.log("REMOVE_EVENT exeption:",s),Ts}},async SUCCESS_EVENT({commit:t},e){try{const{successEvent:s}=await gs.events.successEvent(e);return s?.allEvents&&t("SET_EVENTS",s.allEvents),{...Os,data:s}}catch(s){return console.log("REMOVE_EVENT exeption:",s),Ts}}},getters:{EVENTS:t=>t.events}},xs={state:()=>({clients:[]}),mutations:{SET_CLIENTS(t,e){t.clients=e}},actions:{async GET_ALL_CLIENTS({commit:t}){try{const{allClients:e}=await gs.clients.fetchAllClients();return t("SET_CLIENTS",e),{...Os,data:e}}catch(e){return console.log("GET_ALL_CLIENTS exeption:",e),Ts}},async CREATE_CLIENT({commit:t},e){try{const{createClient:s}=await gs.clients.createClient(e);return t("SET_CLIENTS",s?.allClients||[]),{...Os,data:s}}catch(s){return console.log("CREATE_CLIENT exeption:",s),Ts}},async UPDATE_CLIENT({commit:t},{id:e,data:s}){try{const{updateClient:r}=await gs.clients.updateClient(e,s);return t("SET_CLIENTS",r?.allClients||[]),{...Os,data:r}}catch(r){return console.log("UPDATE_CLIENT exeption:",r),Ts}},async REMOVE_CLIENT({commit:t},e){try{const{removeClient:s}=await gs.clients.removeClient(e);return t("SET_CLIENTS",s?.allClients||[]),{...Os,data:s}}catch(s){return console.log("REMOVE_CLIENT exeption:",s),Ts}},async GET_CLIENT_BY_ID({commit:t},e){try{const{clientById:t}=await gs.clients.fetchClientById(e);if(!t)throw"[GET_CLIENT_BY_ID] clientById exist";return{...Os,data:t}}catch(s){return Ts}},async PUT_TO_BLOCK({commit:t},e){try{const{putToBlock:t}=await gs.clients.putToBlock(e);if(!t)throw"[PUT_TO_BLOCK] putToBlock exist";return{...Os,data:t}}catch(s){return Ts}}},getters:{CLIENTS:t=>t.clients}},ys={state:()=>({products:[]}),mutations:{SET_PRODUCTS(t,e){t.products=e}},actions:{async GET_ALL_PRODUCTS({commit:t}){try{const{allProducts:e}=await gs.products.getProducts();return t("SET_PRODUCTS",e||[]),{...Os,data:e}}catch(e){return console.log("GET_ALL_PRODUCTS exeption:",e),Ts}},async CREATE_PRODUCT({commit:t},e){try{const{createProduct:s}=await gs.products.createProduct(e);return t("SET_PRODUCTS",s?.allProducts||[]),{...Os,data:s}}catch(s){return console.log("CREATE_PRODUCT exeption:",s),Ts}},async UPDATE_PRODUCT({commit:t},{id:e,data:s}){try{const{updateProduct:r}=await gs.products.updateProduct(e,s);return t("SET_PRODUCTS",r?.allProducts||[]),{...Os,data:r}}catch(r){return console.log("UPDATE_PRODUCT exeption:",r),Ts}},async REMOVE_PRODUCT({commit:t},e){try{const{removeProduct:s}=await gs.products.removeProduct(e);return console.log("removeProduct",s),t("SET_PRODUCTS",s?.allProducts||[]),{...Os,data:s}}catch(s){return console.log("REMOVE_PRODUCT exeption:",s),Ts}},UPLOAD_PRODUCT_IMAGE({commit:t},{id:e,img:s}){try{return gs.products.uploadImage(e,s)}catch(r){return console.log("UPLOAD_PRODUCT_IMAGE exeption:",r),Ts}}},getters:{PRODUCTS:t=>t.products}},Ss={state:()=>({allOrders:[],isCreateOrderShow:!1,isDetailOrderShow:!1,defaultOrderData:null,detailOrderShieldData:null}),mutations:{SET_ALL_ORDERS(t,e){t.allOrders=e||[]},SHOW_ORDER_FORM(t,e){e&&(t.defaultOrderData=e),t.isCreateOrderShow=!0},CLOSE_ORDER_FORM(t){t.isCreateOrderShow=!1,t.defaultOrderData=null},SHOW_ORDER_DETAIL_SHIELD(t,e){e&&(t.detailOrderShieldData=e),t.isDetailOrderShow=!0},CLOSE_ORDER_DETAIL_SHIELD(t){t.isDetailOrderShow=!1,t.detailOrderShieldData=null}},actions:{async GET_ALL_ORDERS({commit:t}){try{const{allOrders:e}=await gs.order.fetchAllOrders();return t("SET_ALL_ORDERS",e),{...Os,data:e}}catch(e){return console.log("GET_ALL_ORDERS exeption:",e),Ts}},async CREATE_ORDER({commit:t},e){try{const{createOrder:s}=await gs.order.createOrder(e);return t("SET_ALL_ORDERS",s.allOrders),{...Os,data:s}}catch(s){return console.log("CREATE_ORDER exeption:",s),Ts}},async PAY_FOR_ORDER({commit:t},e){try{const{payForOrder:s}=await gs.order.payForOrder(e);return t("SET_ALL_ORDERS",s.allOrders),{...Os,data:s}}catch(s){return console.log("PAY_FOR_ORDER exeption:",s),Ts}},async UPDATE_AND_PAY_ORDER({commit:t},{id:e,orderData:s}){try{const{updateAndPayOrder:r}=await gs.order.updateAndPayOrder(e,s);return t("SET_ALL_ORDERS",r.allOrders),{...Os,data:r}}catch(r){return console.log("UPDATE_AND_PAY_ORDER exeption:",r),Ts}},async CANCEL_ORDER({commit:t},e){try{const{cancelOrder:s}=await gs.order.cancelOrder(e);return t("SET_ALL_ORDERS",s.allOrders),{...Os,data:s}}catch(s){return console.log("CANCEL_ORDER exeption:",s),Ts}}},getters:{ALL_ORDERS:t=>t.allOrders,IS_CREATE_ORDER_SHOW:t=>t.isCreateOrderShow,IS_DETAIL_ORDER_SHOW:t=>t.isDetailOrderShow,DEFAULT_ORDER_DATA:t=>t.defaultOrderData,DETAIL_ORDER_SHIELD_DATA:t=>t.detailOrderShieldData}},ks={state:()=>({feedbacks:[]}),mutations:{SET_FEEDBACKS(t,e){t.feedbacks=e}},actions:{async GET_ALL_FEEDBACKS({commit:t}){try{const{allFeedbacks:e}=await gs.feedbacks.getFeedbacks();return console.log("allFeedbacks",e),t("SET_FEEDBACKS",e||[]),{...Os,data:e}}catch(e){return console.log("GET_ALL_FEEDBACKS exeption:",e),Ts}},async UPDATE_FEEDBACK({commit:t},{id:e,data:s}){try{const{updateFeedback:r}=await gs.feedbacks.updateFeedback(e,s);return t("SET_FEEDBACKS",r?.allFeedbacks||[]),{...Os,data:r}}catch(r){return console.log("UPDATE_FEEDBACK exeption:",r),Ts}}},getters:{FEEDBACKS:t=>t.feedbacks}};r.ZP.use(St.ZP);var bs=new St.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{user:Cs,services:fs,master:_s,events:Es,clients:xs,products:ys,order:Ss,feedbacks:ks}});const Os={status:"success",ok:!0,data:null},Ts={status:"error",ok:!1,data:null};var ws=s(8345),Ps=function(){var t=this,e=t._self._c;return e(E.Z,{staticClass:"g-login d-flex flex-column",attrs:{color:"white",elevation:"0",height:"320",width:"327"}},[e("div",{staticClass:"text-h4 text-center"},[t._v("Вход")]),e("div",{staticClass:"flex-grow-1"},[e(D.Z,{ref:"username",attrs:{label:"Логин",rules:[()=>!!t.username||"Введите логин"],color:"rgba(36, 49, 56, 0.38)"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e(D.Z,{ref:"password",attrs:{label:"Пароль",type:"password",rules:[t=>!!t||"Введите пароль",t=>t.length>3||"Короткий пароль"],color:"rgba(36, 49, 56, 0.38)"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e(_.Z,{attrs:{"x-large":"",color:"#FFC11C",dark:"",elevation:"0"},on:{click:t.onLogin}},[t._v(" Войти ")])],1)},Ds=[],Zs={name:"GLogin",data:()=>({username:"",password:""}),computed:{form(){return{username:this.username,password:this.password}}},mounted(){this.CHECK_TOKEN()},methods:{...(0,St.nv)(["LOGIN","CHECK_TOKEN"]),async onLogin(){const t=we.call(this,this.form);if(t)return;const e=await this.LOGIN({username:this.username,password:this.password});console.log("responseresponse",e),"success"===e.status&&this.$router.push("/")}}},Is=Zs,As=(0,h.Z)(Is,Ps,Ds,!1,null,null,null),Rs=As.exports,Fs=s(3493),Ls=s(7423),$s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-calendar flex-grow-1 d-flex flex-column"},[e("h1",[t._v("Календарь")]),e(w.Z,{staticClass:"g-calendar__content fill-height flex-grow-1 d-flex"},[e(y.Z,{staticClass:"flex-column d-flex flex-column"},[e(Ls.Z,{attrs:{height:"64"}},[e(B.Z,{attrs:{flat:""}},[e(_.Z,{staticClass:"mr-4 h-40",attrs:{outlined:"",tile:"",color:"grey darken-2"},on:{click:t.setToday}},[t._v(" Сегодня ")]),e(_.Z,{attrs:{fab:"",tile:"",text:"",small:"",color:"grey darken-2"},on:{click:t.prev}},[e(O.Z,{attrs:{small:""}},[t._v(" mdi-chevron-left ")])],1),e(_.Z,{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.next}},[e(O.Z,{attrs:{small:""}},[t._v(" mdi-chevron-right ")])],1),t.$refs.calendar?e(W.qW,[t._v(" "+t._s(t.$refs.calendar.title)+" ")]):t._e(),e(P.Z),e(Zt.Z,{staticClass:"mr-4 g-calendar__groomers-filter",attrs:{items:t.grummersList,outlined:"",tile:"",color:"grey darken-2","item-color":"grey darken-2","hide-details":"",dense:""},model:{value:t.currentGroomerId,callback:function(e){t.currentGroomerId=e},expression:"currentGroomerId"}}),e(_.Z,{staticClass:"mr-4 h-40",attrs:{outlined:"",tile:"",color:"grey darken-2"},on:{click:t.createOrder}},[t._v(" Оформить заказ ")]),e(_.Z,{staticClass:"mr-4 h-40",attrs:{outlined:"",tile:"",color:"grey darken-2"},on:{click:function(e){t.type="week"}}},[t._v(" Неделя ")]),e(_.Z,{staticClass:"mr-4 h-40",attrs:{outlined:"",tile:"",color:"grey darken-2"},on:{click:function(e){t.type="month"}}},[t._v(" Месяц ")]),e(_.Z,{staticClass:"h-40",attrs:{outlined:"",tile:"",color:"grey darken-2"},on:{click:t.getEvents}},[e(O.Z,[t._v(" mdi-autorenew ")])],1)],1)],1),e(Ls.Z,{staticClass:"flex-grow-1",attrs:{height:"600"}},[e(Fs.Z,{ref:"calendar",attrs:{color:"#FFC11C",events:t.events,"event-color":t.getEventColor,"show-week":!0,type:t.type,"category-show-all":"",locale:"ru",categories:t.categories,weekdays:"1,2,3,4,5,6,0","locale-first-day-of-year":4,"event-ripple":!1,"event-more-text":"смотреть все"},on:{"click:more":t.toggleWeek,"click:date":function(e){t.type="category"},"click:day":t.showCreateEventForm,"click:time":t.showCreateEventForm,"click:event":t.showEvent,"mousedown:event":t.startDrag,"mousemove:time":t.mouseMove,"mousedown:time":t.startTime,"mouseup:time":t.endDrag,change:t.getEvents,"contextmenu:time":t.toggleWeek,"contextmenu:day":t.toggleWeek},nativeOn:{mouseleave:function(e){return t.cancelDrag.apply(null,arguments)}},scopedSlots:t._u([{key:"event",fn:function({event:s,timed:r,eventSummary:a}){return[e("div",{staticClass:"d-flex align-start pl-1"},[s.isSuccess||s.client?t._e():e(O.Z,{staticStyle:{"margin-top":"2px"},attrs:{color:"white",size:"16"}},[t._v(" mdi-account-outline ")]),e("div",{staticClass:"v-event-draggable",domProps:{innerHTML:t._s(a())}})],1),e("div",{staticClass:"px-2"},[e("b",[t._v(" "+t._s(s.services.length>1?"Услуги":"Услуга")+" ")]),t._v(" : ")]),s.services.length?e("ul",{staticClass:"mb-1"},t._l(s.services,(function(s){return e("li",{key:s.id},[t._v(" "+t._s(s.breed.title)+" - "+t._s(s.title)+" ")])})),0):e("div",{staticClass:"px-2"},[e("i",[t._v("Услуга не выбрана")])]),s.master?e("div",{staticClass:"px-2"},[e("b",[t._v("Груммер")]),t._v(": "+t._s(s.master.username)+" "+t._s(s.master.lastname)+" ")]):t._e(),s.client?e("div",{staticClass:"px-2"},[e("b",[t._v("Клиент")]),t._v(": "+t._s(s.client.username)+" "+t._s(s.client.lastname)+" ")]):t._e(),r?e("div",{staticClass:"v-event-drag-bottom",on:{mousedown:function(e){return e.stopPropagation(),t.extendBottom(s)}}}):t._e()]}}]),model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}}),e("GCalendarEventMenu",{attrs:{"selected-event":t.selectedEvent,"selected-element":t.selectedElement,"services-list":t.SERVICES,"groomers-list":t.GROOMERS,"clients-list":t.CLIENTS},on:{setEvent:t.setEvent,saveEvent:t.saveEvent,onClose:t.getEvents,onRemoveEvent:t.removeEvent,toCreateOrder:t.toCreateOrder},model:{value:t.selectedOpen,callback:function(e){t.selectedOpen=e},expression:"selectedOpen"}})],1)],1)],1),e("GCreateEventModalForm",{attrs:{"is-avtive":t.isModalFromShow,"current-date":t.currentDate,"current-time":t.currentTime,"services-list":t.SERVICES,"groomers-list":t.GROOMERS,"clients-list":t.CLIENTS},on:{onModalClose:function(e){t.isModalFromShow=!1},onSubmitEvent:t.createEvent}})],1)},Ms=[];const Gs=t=>{if(!t)return"Любой мастер";const{username:e,lastname:s,id:r}=t;return`#${r} ${e} ${s}`};var Ns={name:"GCalendar",components:{GCreateEventModalForm:U,GCalendarEventMenu:st},data:()=>({isModalFromShow:!1,currentDate:"",currentTime:"",focus:"",type:"month",typeToLabel:{month:"Месяц",week:"Неделя",day:"День","4day":"4 Дня"},selectedEvent:{},selectedElement:null,dragEvent:null,dragStart:null,currentEvent:null,createStart:null,extendOriginal:null,selectedOpen:!1,events:[],currentGroomerId:null}),computed:{...(0,St.Se)(["SERVICES","GROOMERS","EVENTS","CLIENTS"]),categories(){return this.GROOMERS.map(Gs)},grummersList(){const t=this.GROOMERS.map((({id:t,username:e,lastname:s})=>({text:`${e} ${s}`,value:t})));return[{text:"Все грумеры",value:null},...t]}},watch:{EVENTS(t){const e=this.currentGroomerId?t.filter((({master:t})=>t.id===this.currentGroomerId)):t;this.events=Us(e)},currentGroomerId(t){console.log("currentGroomerId");const e=t?this.EVENTS.filter((({master:e})=>e.id===t)):this.EVENTS;this.events=Us(e),console.log("this.events",this.events)}},mounted(){console.log("$refs.calendar",this.$vuetify)},methods:{...(0,St.nv)(["GET_EVENTS","CREATE_EVENT","UPDATE_EVENT","REMOVE_EVENT"]),...(0,St.OI)(["SHOW_ORDER_FORM"]),async getEvents(){const{data:t}=await this.GET_EVENTS();this.events=Us(t)},checkChange(){this.$refs.calendar.checkChange()},createOrder(){this.SHOW_ORDER_FORM()},async createEvent(t){const{data:{allEvents:e}}=await this.CREATE_EVENT(t);this.isModalFromShow=!1,e&&(this.events=Us(e))},toggleWeek({date:t}){this.focus=t,this.type="week"===this.type?"month":"week"},showCreateEventForm({date:t,time:e}){this.currentEvent||(this.currentTime=e,this.currentDate=t,this.isModalFromShow=!0)},getEventColor({color:t,isSuccess:e}){return e?"grey darken-1":t},setToday(){this.focus=""},prev(){this.$refs.calendar?.prev()},next(){this.$refs.calendar?.next()},setEvent(t){for(let e in t)this.selectedEvent[e]=t[e]},async saveEvent(){if(!this.selectedEvent)return;const t=this.EVENTS.find((t=>t.id===this.selectedEvent.id));if(!t)return;const{start:e,end:s,name:r,timed:a,color:i,services:n,...l}=this.selectedEvent,o={...l,title:r,startDate:F(e),endDate:F(s),services:JSON.parse(JSON.stringify(n))},c=L(t,o);if(Object.keys(c).length){const{data:{allEvents:t}}=await this.UPDATE_EVENT({id:this.selectedEvent.id,data:c});t&&(this.events=Us(t))}},async updateEventDates(t){if(!t)return;const e={startDate:F(t.start),endDate:F(t.end)},{data:{allEvents:s}}=await this.UPDATE_EVENT({id:t.id,data:e});s&&(this.events=Us(s))},async removeEvent(t){const{data:{allEvents:e}}=await this.REMOVE_EVENT(t);this.closeEvent(),e&&(this.events=Us(e))},showEvent({nativeEvent:t,event:e}){if(this.currentEvent)return;const s=()=>{this.selectedEvent=e,this.selectedElement=t.target,requestAnimationFrame((()=>requestAnimationFrame((()=>{this.selectedOpen=!0,this.selectedEvent=e}))))};if(this.selectedOpen)this.closeEvent();else{const t=this.dragEvent?200:0;setTimeout(s,t)}t.stopPropagation()},closeEvent(){requestAnimationFrame((()=>requestAnimationFrame((()=>{this.selectedOpen=!1,this.selectedEvent=null}))))},startDrag({event:t,timed:e}){t.isSuccess||(this.dragEvent=t,this.dragTime=null,this.extendOriginal=null)},extendBottom(t){t.isSuccess||(this.currentEvent=t,this.createStart=t.start,this.extendOriginal=t.end)},startTime(t){const e=this.toTime(t);if(this.dragEvent&&null===this.dragTime){const t=this.dragEvent.start;this.dragTime=e-t}},mouseMove(t){const e=this.toTime(t);if(this.dragEvent&&null!==this.dragTime){const t=this.dragEvent.start,s=this.dragEvent.end,r=s-t,a=e-this.dragTime,i=this.roundTime(a),n=i+r;this.dragEvent.start=i,this.dragEvent.end=n}else if(this.currentEvent&&null!==this.createStart){const t=this.roundTime(e,!1),s=Math.min(t,this.createStart),r=Math.max(t,this.createStart);this.currentEvent.start=s,this.currentEvent.end=r}},async endDrag(){(this.currentEvent||this.dragEvent)&&await this.updateEventDates(this.currentEvent||this.dragEvent),this.currentEvent=null,this.createStart=null,this.extendOriginal=null,this.dragTime=null,this.dragEvent=null},cancelDrag(){this.currentEvent&&(this.currentEvent.end=this.extendOriginal),this.endDrag()},roundTime(t,e=!0){const s=15,r=60*s*1e3;return e?t-t%r:t+(r-t%r)},toTime(t){return new Date(t.year,t.month-1,t.day,t.hour,t.minute).getTime()},toCreateOrder(t){this.selectedOpen=!1,t&&this.SHOW_ORDER_FORM(t)}}};const Us=t=>t.map((({title:t,startDate:e,endDate:s,master:r,...a})=>({...a,master:r,name:t,start:new Date(e).getTime(),end:new Date(s).getTime(),color:r?.color||"#FFC11C",timed:!0,category:Gs(r)})));var Vs=Ns,Bs=(0,h.Z)(Vs,$s,Ms,!1,null,null,null),Ws=Bs.exports,qs=s(626),js=s(2769),Hs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-stock flex-grow-1 d-flex flex-column"},[e("h1",{staticClass:"mb-4"},[t._v("Склад")]),e(b.Z,{staticClass:"mb-5"}),e(w.Z,{staticClass:"flex-grow-0 my-0 mb-5"},[e(y.Z,{staticClass:"py-0 d-flex align-end"},[e(js.Z,{attrs:{color:"#FFC11C"},model:{value:t.activeTabIdx,callback:function(e){t.activeTabIdx=e},expression:"activeTabIdx"}},[e(qs.Z,{on:{click:function(e){t.activeTabIdx="products"}}},[t._v(" Товары ")]),e(qs.Z,{on:{click:function(e){t.activeTabIdx="services"}}},[t._v(" Услуги ")])],1)],1),e(y.Z,{staticClass:"d-flex py-0"},[e(P.Z),e(_.Z,{staticClass:"mr-4",attrs:{"x-large":"",tile:"",outlined:"",elevation:"0"},on:{click:t.createOrder}},[e(O.Z,[t._v("mdi-plus")]),t._v(" Оформить заказ ")],1),0===t.activeTabIdx?e(_.Z,{attrs:{"x-large":"",color:"#FFC11C",tile:"",dark:"",elevation:"0"},on:{click:t.createProduct}},[e(O.Z,[t._v("mdi-plus")]),t._v(" Добавить новый товар ")],1):t._e(),1===t.activeTabIdx?e(_.Z,{attrs:{"x-large":"",color:"#FFC11C",tile:"",dark:"",elevation:"0"},on:{click:t.createService}},[e(O.Z,[t._v("mdi-plus")]),t._v(" Добавить новую услугу ")],1):t._e()],1)],1),0===t.activeTabIdx?e("GStockProductsTable",{staticClass:"flex-grow-1",attrs:{products:t.products,"old-product":t.oldProduct,"selected-product":t.selectedProduct,"writable-product-id":t.writableProductId},on:{createProduct:t.successCreateProduct,updateProduct:t.successSaveProduct,cancelWritingProduct:t.cancelWritingProduct,writeProduct:t.writeProduct,removeProduct:t.removeProduct}}):t._e(),1===t.activeTabIdx?e("GStockServicesTable",{staticClass:"flex-grow-1",attrs:{services:t.services,"old-service":t.oldService,"selected-service":t.selectedService,"writable-service-id":t.writableServiceId,categories:t.categories,breeds:t.breeds},on:{createService:t.successCreateService,updateService:t.successSaveService,cancelWritingService:t.cancelWritingService,writeService:t.writeService,removeService:t.removeService}}):t._e(),e(k.Z,{attrs:{persistent:"","max-width":"290"},model:{value:t.removeDialog,callback:function(e){t.removeDialog=e},expression:"removeDialog"}},[e(E.Z,[e(x.EB,{staticClass:"text-h5"},[t._v(" "+t._s(t.removeDialogTitle)+" ")]),e(x.ZB,[t._v(" "+t._s(t.removeDialogText)+" ")]),e(x.h7,[e(P.Z),e(_.Z,{attrs:{color:"green darken-1",text:""},on:{click:t.cancelRemoveProduct}},[t._v(" Отмена ")]),e(_.Z,{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.removeDialogCb&&t.removeDialogCb()}}},[t._v(" Удалить ")])],1)],1)],1)],1)},Ks=[];const Ys={id:-1,title:"",vendorCode:"",count:0,price:0,description:""},Js={id:-1,title:"",text:"",animal:"ANY",price:"0",time:"1 час",img:null,category:null,breed:null};var zs={name:"GStock",components:{GStockProductsTable:be,GStockServicesTable:Le},data:()=>({activeTabIdx:0,removeDialog:!1,removeDialogTitle:"",removeDialogText:"Отменить действие будет невозможно",removeDialogCb:null,products:[],services:[],breeds:[],categories:[],writableProductId:null,writableServiceId:null,selectedProduct:null,selectedService:null,oldProducts:null,oldServices:null,oldProduct:null,oldService:null,removeProductId:null}),computed:{},mounted(){this.getProducts(),this.getServices()},methods:{...(0,St.nv)(["GET_ALL_PRODUCTS","CREATE_PRODUCT","UPDATE_PRODUCT","REMOVE_PRODUCT","UPLOAD_PRODUCT_IMAGE","GET_SERVICES","CREATE_SERVICE","UPDATE_SERVICE","REMOVE_SERVICE","UPLOAD_SERVICE_IMAGE"]),...(0,St.OI)(["SHOW_ORDER_FORM"]),async getProducts(){const{data:t}=await this.GET_ALL_PRODUCTS();this.products=t},async getServices(){const{data:t}=await this.GET_SERVICES(),{allServices:e,allBreeds:s,allCategories:r}=t;this.services=e||[],this.breeds=s||[],this.categories=r||[]},createProduct(){this.oldProducts=JSON.parse(JSON.stringify(this.products)),this.products=[{...Ys},...this.products],this.writableProductId=-1,this.selectedProduct=this.products[0]},createService(){this.oldServices=JSON.parse(JSON.stringify(this.services)),this.services=[{...Js},...this.services],this.writableServiceId=-1,this.selectedService=this.services[0]},async successCreateProduct({img:t,...e}){const{data:{product:s}}=await this.CREATE_PRODUCT(e);t&&s&&s?.id&&await this.UPLOAD_PRODUCT_IMAGE({id:s.id,img:t}),this.selectedProduct=null,this.writableProductId=null,this.oldProducts=null,this.getProducts()},async successCreateService({img:t,...e}){const{data:{service:s}}=await this.CREATE_SERVICE(e);t&&s&&s?.id&&await this.UPLOAD_SERVICE_IMAGE({id:s.id,img:t}),this.selectedService=null,this.writableServiceId=null,this.oldServices=null,this.getServices()},async successSaveProduct(t,{img:e,...s}){if(Object.keys(s).length){const{data:e}=await this.UPDATE_PRODUCT({id:t,data:s});if(!e)return}e&&await this.UPLOAD_PRODUCT_IMAGE({id:t,img:e}),this.selectedProduct=null,this.writableProductId=null,this.oldProducts=null,this.getProducts()},async successSaveService(t,{img:e,...s}){if(Object.keys(s).length){const{data:e}=await this.UPDATE_SERVICE({id:t,data:s});if(!e)return}e&&await this.UPLOAD_SERVICE_IMAGE({id:t,img:e}),this.selectedService=null,this.writableServiceId=null,this.oldServices=null,this.getServices()},writeProduct(t){this.cancelWritingProduct(),this.writableProductId=t,this.selectedProduct=this.products.find((e=>+e.id===+t)),this.oldProduct=JSON.parse(JSON.stringify(this.selectedProduct))},writeService(t){this.cancelWritingService(),this.writableServiceId=t,this.selectedService=this.services.find((e=>+e.id===+t)),this.oldService=JSON.parse(JSON.stringify(this.selectedService))},cancelWritingProduct(){this.oldProducts&&(this.products=[...this.oldProducts],this.oldProducts=null),this.oldProduct&&(this.products=[...this.products].map((t=>t.id===this.writableProductId?{...this.oldProduct}:t)),this.oldProduct=null),this.selectedProduct=null,this.writableProductId=null},cancelWritingService(){this.oldServices&&(this.services=[...this.oldServices],this.oldServices=null),this.oldService&&(this.services=[...this.services].map((t=>t.id===this.writableServiceId?{...this.oldService}:t)),this.oldService=null),this.selectedService=null,this.writableServiceId=null},removeProduct(t){this.removeProductId=t,this.removeDialog=!0,this.removeDialogTitle=`Удалить продукт #${t}?`,this.removeDialogCb=this.confirmedRemoveProduct},removeService(t){this.removeServiceId=t,this.removeDialog=!0,this.removeDialogTitle=`Удалить услугу #${t}?`,this.removeDialogCb=this.confirmedRemoveService},cancelRemoveProduct(){this.removeProductId=null,this.removeDialog=!1},async confirmedRemoveProduct(){if(this.removeProductId){const{data:{allProducts:t}}=await this.REMOVE_PRODUCT(this.removeProductId);this.products=t}this.removeProductId=null,this.removeDialog=!1},async confirmedRemoveService(){if(this.removeServiceId){const{data:t}=await this.REMOVE_SERVICE(this.removeServiceId);t.success&&this.getServices()}this.removeServiceId=null,this.removeDialog=!1},createOrder(){this.SHOW_ORDER_FORM()}}},Qs=zs,Xs=(0,h.Z)(Qs,Hs,Ks,!1,null,null,null),tr=Xs.exports,er=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-orders flex-grow-1 d-flex flex-column"},[e("h1",{staticClass:"mb-4"},[t._v("Заказы")]),e(b.Z,{staticClass:"mb-5"}),e(w.Z,{staticClass:"flex-grow-0 my-0 mb-5"},[e(y.Z,{staticClass:"py-0 d-flex align-end",attrs:{cols:"3"}}),e(y.Z,{staticClass:"d-flex py-0"},[e(P.Z),e(_.Z,{attrs:{"x-large":"",tile:"",outlined:"",elevation:"0"},on:{click:t.createOrder}},[e(O.Z,[t._v("mdi-plus")]),t._v(" Оформить заказ ")],1)],1)],1),e(Ct.Z,{staticClass:"flex-grow-1",attrs:{"items-per-page":t.itemsPerPage,headers:t.headers,items:t.currentOrders,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка","hide-default-footer":"",page:t.currentPage},on:{pagination:t.setCurrentPage},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[e("tr",{staticClass:"pointer",on:{click:function(e){return t.showDetail(s)}}},[e("td",{staticClass:"py-2"},[t._v(" "+t._s(s.id)+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.createDate)+" ")]),e("td",{staticClass:"text-xs-right py-2",class:`is-${s.status}`},[t._v(" "+t._s(t.statuses[s.status])+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.price)+" ")])])]}},{key:"footer",fn:function({props:{options:s,pagination:r}}){return[e("div",{staticClass:"v-data-footer__wrapper d-flex align-center pl-2"},[e("div",{staticClass:"v-data-footer__info"},[t._v(" Всего: "+t._s(t.currentOrders.length)+" "+t._s(t.declOfNum(t.currentOrders.length,t.titles))+" ")]),e(Yt.Z,{staticClass:"flex-grow-1",attrs:{options:s,pagination:r,"items-per-page-text":"Строк на странице:","items-per-page-all-text":"Все","show-current-page":"","show-first-last-page":"","page-text":`${t.currentPage} из ${t.pageCount}`},on:{"update:options":t.footerUpdate}})],1)]}}])})],1)},sr=[];const rr=t=>new Intl.DateTimeFormat("ru-RU",{dateStyle:"medium",timeStyle:"short"}).format(new Date(t));var ar={name:"GOrders",data:()=>({searchStr:"",headers:[{text:"Номер заказа",value:"id"},{text:"Время заказа",value:"createDate"},{text:"Статус заказа",value:"status"},{text:"Сумма заказа",value:"price"}],orders:[],currentPage:0,pageCount:0,itemsPerPage:15,statuses:{reserved:"Забронировано",success:"Продано",cancel:"Отменен",overdue:"Просрочен"},titles:["заказ","заказа","заказов"]}),computed:{...(0,St.Se)(["ALL_ORDERS"]),currentOrders(){return this.orders.map((t=>{let e="reserved";return t.isCancel?e="cancel":t.isSuccess&&(e="success"),{id:t.id,createDate:rr(t.createDate),price:t.price,status:e,data:t}}))}},watch:{ALL_ORDERS(t){this.orders=t||[]}},mounted(){this.GET_ALL_ORDERS()},methods:{...(0,St.nv)(["GET_ALL_ORDERS"]),...(0,St.OI)(["SHOW_ORDER_FORM","SHOW_ORDER_DETAIL_SHIELD"]),declOfNum:Et,createOrder(){this.SHOW_ORDER_FORM()},setCurrentPage({page:t,pageCount:e}){this.currentPage=t,this.pageCount=e},showDetail({data:t}){this.SHOW_ORDER_DETAIL_SHIELD(t)},footerUpdate({page:t,itemsPerPage:e}){this.currentPage=t,this.itemsPerPage=e}}},ir=ar,nr=(0,h.Z)(ir,er,sr,!1,null,null,null),lr=nr.exports,or=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-clients flex-grow-1 d-flex flex-column"},[e("h1",{staticClass:"mb-4"},[t._v("Клиенты")]),e(b.Z,{staticClass:"mb-5"}),e(w.Z,{staticClass:"flex-grow-0 my-0 mb-5"},[e(y.Z,{staticClass:"py-0 d-flex align-end",attrs:{cols:"3"}},[e(D.Z,{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Поиск клиента","single-line":"","hide-details":"",color:"#FFC11C",filled:"",dense:""},model:{value:t.searchStr,callback:function(e){t.searchStr=e},expression:"searchStr"}})],1),e(y.Z,{staticClass:"d-flex"},[e(P.Z),e(_.Z,{staticClass:"mr-4",attrs:{"x-large":"",tile:"",outlined:"",elevation:"0"},on:{click:t.SHOW_ORDER_FORM}},[e(O.Z,[t._v("mdi-plus")]),t._v(" Оформить заказ ")],1),e(_.Z,{attrs:{"x-large":"",color:"#FFC11C",tile:"",dark:"",elevation:"0"},on:{click:t.createClient}},[e(O.Z,[t._v("mdi-plus")]),t._v(" Создать нового клиента ")],1)],1)],1),e(Ct.Z,{staticClass:"flex-grow-1",attrs:{"items-per-page":t.itemsPerPage,headers:t.headers,items:t.currentClients,search:t.search,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка","hide-default-footer":"",page:t.currentPage},on:{pagination:t.setCurrentPage},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[+t.writableClientId===+s.id&&t.selectedClient?e("tr",[t._l(["username","lastname"],(function(s){return e("td",{key:s,staticClass:"g-clients__td text-xs-right py-2"},[e(D.Z,{attrs:{filled:"",dense:"",color:"#FFC11C",light:"","hide-details":""},model:{value:t.selectedClient[s],callback:function(e){t.$set(t.selectedClient,s,e)},expression:"selectedClient[key]"}})],1)})),e("td",{staticClass:"g-clients__td text-xs-right py-2"},[e(D.Z,{staticClass:"data-tel-input",attrs:{value:t.selectedClient.phone,filled:"",dense:"",color:"#FFC11C",light:"","hide-details":""},on:{input:t.setPhone}})],1),e("td",{staticClass:"g-clients__td text-xs-right py-2"},[e(Z.Z,{staticClass:"lex-grow-1",attrs:{filled:"",color:"#FFC11C",light:"","hide-details":"",rows:"2"},model:{value:t.selectedClient.animal,callback:function(e){t.$set(t.selectedClient,"animal",e)},expression:"selectedClient.animal"}})],1),e("td",{staticClass:"g-clients__td text-xs-right py-2"},[e("div",{staticClass:"d-flex align-center"},[e(Z.Z,{staticClass:"lex-grow-1",attrs:{filled:"",color:"#FFC11C",light:"","hide-details":"",rows:"2"},model:{value:t.selectedClient.comment,callback:function(e){t.$set(t.selectedClient,"comment",e)},expression:"selectedClient.comment"}})],1)]),e("td",{staticClass:"py-2"},[e(_.Z,{staticClass:"mb-2",staticStyle:{width:"100%"},attrs:{elevation:"0","x-large":""},on:{click:t.cancelWritingClient}},[t._v(" Отменить ")]),e(_.Z,{staticClass:"d-block",staticStyle:{width:"100%"},attrs:{elevation:"0","x-large":"",color:"#FFC11C",tile:"",dark:""},on:{click:t.saveClient}},[t._v(" Сохранить ")])],1)],2):e("tr",{staticClass:"pointer",class:{"red lighten-4":s.isBlocked},on:{click:function(e){return t.goToClientDetail(s.id)},contextmenu:function(e){return e.preventDefault(),t.writeClient(s.id)}}},[t._l(["username","lastname","phone","animal"],(function(r){return e("td",{key:r,staticClass:"text-xs-right py-2"},[e("span",[t._v(t._s(s[r]))])])})),e("td",{staticClass:"text-xs-right py-2"},[e("div",{staticClass:"flex-grow-1"},[t._v(" "+t._s(s.comment)+" ")])]),e("td",{staticClass:"text-center"},[e(P.Z),e(V.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:r}){return[e(O.Z,{staticClass:"mr-5",attrs:{color:r?"#FFC11C":"gray"},on:{click:function(e){return t.writeClient(s.id)}}},[t._v(" mdi-pencil-outline ")])]}}],null,!0)}),e(V.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:r}){return[e(O.Z,{attrs:{color:r?"red":"gray"},on:{click:function(e){return t.removeClient(s.id)}}},[t._v(" mdi-trash-can-outline ")])]}}],null,!0)}),e(P.Z)],1)],2)]}},{key:"footer",fn:function({props:{options:s,pagination:r}}){return[e("div",{staticClass:"v-data-footer__wrapper d-flex align-center pl-2"},[e("div",{staticClass:"v-data-footer__info"},[t._v(" Всего: "+t._s(t.currentClients.length)+" "+t._s(t.declOfNum(t.currentClients.length,t.titles))+" ")]),e(Yt.Z,{staticClass:"flex-grow-1",attrs:{options:s,pagination:r,"items-per-page-text":"Строк на странице:","items-per-page-all-text":"Все","show-current-page":"","show-first-last-page":"","page-text":`${t.currentPage} из ${t.pageCount}`},on:{"update:options":t.footerUpdate}})],1)]}}])}),e(k.Z,{attrs:{persistent:"","max-width":"290"},model:{value:t.removeDialog,callback:function(e){t.removeDialog=e},expression:"removeDialog"}},[e(E.Z,[e(x.EB,{staticClass:"text-h5"},[t._v(" Удалить клиента? ")]),e(x.ZB,[t._v(" После удаления данные будут недоступны ")]),e(x.h7,[e(P.Z),e(_.Z,{attrs:{color:"#FFC11C",text:""},on:{click:t.cancelRemoveClient}},[t._v(" Отмена ")]),e(_.Z,{attrs:{color:"red darken-1",text:""},on:{click:t.confirmedRemoveClient}},[t._v(" Удалить ")])],1)],1)],1),e("GCreateClientModalForm",{attrs:{"is-avtive":t.isFormActive},on:{onModalClose:function(e){t.isFormActive=!1},onSubmitEvent:t.submitForm}})],1)},cr=[];const dr={id:-1,username:"",lastname:"",phone:"+7",comment:"",animal:""};var ur={name:"GClients",components:{GCreateClientModalForm:pt},data:()=>({currentPage:0,pageCount:0,itemsPerPage:15,searchStr:"",search:"",removeDialog:!1,headers:[{text:"Имя",value:"username",width:300},{text:"Фамилия",value:"lastname",width:300},{text:"Телефон",value:"phone",width:230},{text:"Животное",value:"animal",width:300},{text:"Комментарий",value:"comment"},{text:"Действия",value:"actions",sortable:!1,align:"center",width:200}],clients:[],writableClientId:null,selectedClient:null,oldClients:null,oldClient:null,removedClientId:null,isFormActive:!1,titles:["клиент","клиента","клиентов"]}),computed:{currentClients(){return this.clients.filter((t=>t.username.toLowerCase().includes(this.searchStr.toLowerCase())||t.lastname.toLowerCase().includes(this.searchStr.toLowerCase())||t.phone.includes(this.searchStr)))}},mounted(){this.getClients()},methods:{...(0,St.nv)(["GET_ALL_CLIENTS","CREATE_CLIENT","UPDATE_CLIENT","REMOVE_CLIENT"]),...(0,St.OI)(["SHOW_ORDER_FORM"]),declOfNum:Et,async getClients(){const{data:t}=await this.GET_ALL_CLIENTS();this.clients=t},createClient(){this.cancelWritingClient(),this.oldClients=JSON.parse(JSON.stringify(this.clients)),this.clients=[{...dr},...this.clients],this.writableClientId=-1,this.selectedClient=this.clients[0]},async submitForm(t){const{data:{allClients:e}}=await this.CREATE_CLIENT(t);this.clients=e},async saveClient(){if(!this.selectedClient?.username)return;const t=this.selectedClient;if(-1===t.id){const e={username:t.username?.trim(),lastname:t.lastname?.trim()||"",phone:t.phone?.trim()||"",comment:t.comment?.trim()||"",animal:t.animal?.trim()||""},{data:{allClients:s}}=await this.CREATE_CLIENT(e);this.clients=s,this.selectedClient=null,this.writableClientId=null,this.oldClients=null}else{const e={};if(this.oldClient.username!==t.username&&(e.username=t.username.trim()),this.oldClient.lastname!==t.lastname&&(e.lastname=t.lastname.trim()),this.oldClient.phone!==t.phone&&(e.phone=t.phone.trim()),this.oldClient.animal!==t.animal&&(e.animal=t.animal.trim()),this.oldClient.comment!==t.comment&&(e.comment=t.comment.trim()),!Object.keys(e).length)return this.cancelWritingClient();const{data:{allClients:s}}=await this.UPDATE_CLIENT({id:t.id,data:e});this.clients=s,this.selectedClient=null,this.writableClientId=null,this.oldClients=null}},setCurrentPage({page:t,pageCount:e}){this.currentPage=t,this.pageCount=e},writeClient(t){this.cancelWritingClient(),this.writableClientId=t,this.selectedClient=this.clients.find((e=>+e.id===+t)),this.oldClient={...this.selectedClient}},cancelWritingClient(){this.oldClients&&(this.clients=[...this.oldClients],this.oldClients=null),this.oldClient&&(this.clients=[...this.clients].map((t=>t.id===this.writableClientId?{...this.oldClient}:t)),this.oldClient=null),this.selectedClient=null,this.writableClientId=null},removeClient(t){this.removedClientId=t,this.removeDialog=!0},cancelRemoveClient(){this.removedClientId=null,this.removeDialog=!1},async confirmedRemoveClient(){if(this.removedClientId){const{data:{allClients:t}}=await this.REMOVE_CLIENT(this.removedClientId);this.clients=t}this.removedClientId=null,this.removeDialog=!1},setPhone(t){this.selectedClient.phone=ot(t)},goToClientDetail(t){this.$router.push({name:"g-clientdetail",params:{id:t}})},footerUpdate({page:t,itemsPerPage:e}){this.currentPage=t,this.itemsPerPage=e}}},mr=ur,hr=(0,h.Z)(mr,or,cr,!1,null,null,null),vr=hr.exports,pr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-feedbacks flex-grow-1 d-flex flex-column"},[e("h1",[t._v("Отзывы")]),e("div",{staticClass:"g-feedbacks-table flex-grow-1 d-flex flex-column"},[e(Ct.Z,{staticClass:"flex-grow-1",attrs:{"items-per-page":t.itemsPerPage,headers:t.headers,items:t.FEEDBACKS,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка","hide-default-footer":"",page:t.currentPage},on:{pagination:t.setCurrentPage},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[e("tr",[e("td",{staticClass:"text-left"},[e("span",[t._v(t._s(s.nick))])]),e("td",{staticClass:"text-left"},[e("span",[t._v(t._s(s.text))])]),e("td",{staticClass:"text-center"},[e("div",{staticClass:"d-flex justify-center"},[e(gt.Z,{staticClass:"mt-0",attrs:{"input-value":s.isApproved,color:"#FFC11C","hide-details":""},on:{change:e=>t.changeFeedback(s.id,e)}})],1)])])]}},{key:"footer",fn:function({props:{options:s,pagination:r}}){return[e("div",{staticClass:"v-data-footer__wrapper d-flex align-center pl-2"},[e("div",{staticClass:"v-data-footer__info"},[t._v(" Всего: "+t._s(t.FEEDBACKS.length)+" "+t._s(t.declOfNum(t.FEEDBACKS.length,t.titles))+" ")]),e(Yt.Z,{staticClass:"flex-grow-1",attrs:{options:s,pagination:r,"items-per-page-text":"Строк на странице:","items-per-page-all-text":"Все","show-current-page":"","show-first-last-page":"","page-text":`${t.currentPage} из ${t.pageCount}`},on:{"update:options":t.footerUpdate}})],1)]}}])})],1)])},gr=[],Cr={name:"GFeedbacks",data:()=>({currentPage:0,pageCount:0,itemsPerPage:15,headers:[{text:"Имя Фамилия",value:"nick",width:300},{text:"Коментарий",value:"text"},{text:"Одобрено",value:"isApproved",width:150,align:"center"}],titles:["отзыв","отзыва","отзывов"]}),computed:{...(0,St.Se)(["FEEDBACKS"])},mounted(){this.GET_ALL_FEEDBACKS()},methods:{...(0,St.nv)(["GET_ALL_FEEDBACKS","UPDATE_FEEDBACK"]),declOfNum:Et,async changeFeedback(t,e){const s=await this.UPDATE_FEEDBACK({id:t,data:{isApproved:e}});console.log("res",s)},setCurrentPage({page:t,pageCount:e}){this.currentPage=t,this.pageCount=e},footerUpdate({page:t,itemsPerPage:e}){this.currentPage=t,this.itemsPerPage=e}}},fr=Cr,_r=(0,h.Z)(fr,pr,gr,!1,null,null,null),Er=_r.exports,xr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-groomers d-flex flex-column flex-grow-1"},[e("h1",{staticClass:"mb-4"},[t._v("Грумеры")]),e(b.Z,{staticClass:"mb-5"}),e(w.Z,{staticClass:"flex-grow-0 my-0 mb-5"},[e(y.Z,{staticClass:"py-0 d-flex align-end",attrs:{cols:"3"}},[e(D.Z,{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Поиск заказа","single-line":"","hide-details":"",color:"#FFC11C",filled:"",dense:""},model:{value:t.searchStr,callback:function(e){t.searchStr=e},expression:"searchStr"}})],1),e(y.Z,{staticClass:"d-flex py-0"},[e(P.Z),e(_.Z,{attrs:{"x-large":"",color:"#FFC11C",tile:"",dark:"",elevation:"0"},on:{click:function(e){t.isFormActive=!0}}},[e(O.Z,[t._v("mdi-plus")]),t._v(" Создать нового грумера ")],1)],1)],1),e(Ct.Z,{staticClass:"flex-grow-1",attrs:{"items-per-page":t.itemsPerPage,headers:t.headers,items:t.currentGroomersList,search:t.search,"no-data-text":"Ничего найти не получилось","no-results-text":"Ничего найти не получилось","loading-text":"Загрузка","hide-default-footer":"",page:t.currentPage},on:{pagination:t.setCurrentPage},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[e("tr",{staticClass:"pointer",on:{click:function(e){return t.gotoDetail(s)}}},[e("td",{staticClass:"py-2"},[s.image?e(o.Z,{staticStyle:{"border-radius":"50%"},attrs:{src:s.image,width:"32",height:"32"}}):t._e()],1),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.name)+" ")]),e("td",{staticClass:"text-xs-right py-2"},[t._v(t._s(s.phone))]),e("td",{staticClass:"text-xs-right py-2"},[t._v(" "+t._s(s.experience)+" ")])])]}},{key:"footer",fn:function({props:{options:s,pagination:r}}){return[e("div",{staticClass:"v-data-footer__wrapper d-flex align-center pl-2"},[e("div",{staticClass:"v-data-footer__info"},[t._v(" Всего: "+t._s(t.currentGroomersList.length)+" "+t._s(t.declOfNum(t.currentGroomersList.length,t.titles))+" ")]),e(Yt.Z,{staticClass:"flex-grow-1",attrs:{options:s,pagination:r,"items-per-page-text":"Строк на странице:","items-per-page-all-text":"Все","show-current-page":"","show-first-last-page":"","page-text":`${t.currentPage} из ${t.pageCount}`},on:{"update:options":t.footerUpdate}})],1)]}}])}),e("GCreateGroomerModalForm",{attrs:{"is-avtive":t.isFormActive},on:{onModalClose:function(e){t.isFormActive=!1},onSubmit:t.createNewGroomer}})],1)},yr=[];const Sr="https://groomleta.ru",kr="/mediafiles";var br={name:"GGroomers",components:{GCreateGroomerModalForm:Kt},data:()=>({currentPage:0,pageCount:0,itemsPerPage:15,searchStr:"",search:"",headers:[{text:"Фото",align:"start",sortable:!1,value:"image"},{text:"Имя Фамилия",value:"name"},{text:"Телефон",value:"phone"},{text:"Стаж",value:"experience"}],isFormActive:!1,titles:["грумер","грумера","грумеров"]}),computed:{...(0,St.Se)(["GROOMERS"]),currentGroomersList(){return this.GROOMERS.filter((t=>t.username.toLowerCase().includes(this.searchStr.toLowerCase())||t.lastname.toLowerCase().includes(this.searchStr.toLowerCase())||t.phone.includes(this.searchStr))).map((({id:t,username:e,lastname:s,avatar:r,createDate:a,phone:i})=>({id:t,name:`${e} ${s}`,image:r?`${Sr+kr}/${r}`:"",phone:i,experience:xt(a)})))}},mounted(){},methods:{...(0,St.nv)(["GET_ALL_GROOMERS","CREATE_MASTER"]),declOfNum:Et,setCurrentPage({page:t,pageCount:e}){this.currentPage=t,this.pageCount=e},async createNewGroomer(t){const{data:e}=await this.CREATE_MASTER(t)},gotoDetail({id:t}){this.$router.push({name:"g-groomerdetail",params:{id:t}})},footerUpdate({page:t,itemsPerPage:e}){this.currentPage=t,this.itemsPerPage=e}}},Or=br,Tr=(0,h.Z)(Or,xr,yr,!1,null,null,null),wr=Tr.exports,Pr=s(9286),Dr=s(3305),Zr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-groomer-detail d-flex flex-column flex-grow-1"},[t.isLoading?e("div",{staticClass:"d-flex align-center flex-grow-1 justify-center"},[e(Dr.Z,{attrs:{size:60,width:5,color:"amber",indeterminate:""}})],1):e("div",{staticClass:"flex-grow-1 d-flex flex-column"},[e(Pr.Z,{attrs:{items:t.breadcrumbs},scopedSlots:t._u([{key:"divider",fn:function(){return[e(O.Z,[t._v("mdi-chevron-right")])]},proxy:!0}])}),e("h1",{staticClass:"mb-6"},[t._v(t._s(t.master.username)+" "+t._s(t.master.lastname))]),t.master?e(w.Z,{staticClass:"user-card flex-grow-0"},[e(y.Z,{staticClass:"flex-grow-0 d-flex align-center justify-center",attrs:{cols:"1"}},[t.imageURl?e(o.Z,{staticClass:"pointer",attrs:{src:t.imageURl,width:"126",height:"126"},on:{click:t.loadImage}}):e(_.Z,{attrs:{icon:"","x-large":""},on:{click:t.loadImage}},[e(O.Z,[t._v("mdi-camera")])],1),e("input",{ref:"avatar",attrs:{type:"file",name:"images",multiple:"",accept:".jpg,.png",hidden:""},on:{change:t.onUploadImages}})],1),e(y.Z,{staticClass:"flex-grow-1"},[e(w.Z,[e(y.Z,{staticClass:"pb-0",attrs:{cols:"5"}},[e(Zt.Z,{attrs:{value:t.master.post,items:t.postsList,label:"Должность",color:"#FFC11C","item-color":"warning"},on:{input:e=>t.master.post=e}})],1),e(y.Z,{staticClass:"pb-0",attrs:{cols:"2"}},[e(D.Z,{staticClass:"text-h5",attrs:{value:t.getExperience(t.master.createDate),label:"Стаж",color:"#FFC11C",light:"",readonly:""}})],1),e(y.Z,{staticClass:"pb-0",attrs:{cols:"1"}},[e(D.Z,{staticClass:"text-h5",attrs:{value:t.master.rate+"%",label:"Ставка",color:"#FFC11C",light:""},on:{input:t.setRate}})],1),t.master?e(y.Z,{staticClass:"py-0 d-flex align-center"},[e("GColorSelector",{attrs:{data:t.colors},model:{value:t.master.color,callback:function(e){t.$set(t.master,"color",e)},expression:"master.color"}})],1):t._e()],1),e(w.Z,[e(y.Z,{attrs:{cols:"2"}},[e(D.Z,{staticClass:"text-h5",attrs:{value:t.master.phone,label:"Телефон",color:"#FFC11C",light:""},on:{input:t.setPhone}})],1),e(y.Z,{attrs:{cols:"2"}},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Образование",color:"#FFC11C",light:""},model:{value:t.master.education,callback:function(e){t.$set(t.master,"education",e)},expression:"master.education"}})],1),e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{staticClass:"text-h5",attrs:{label:"Дополнительно",color:"#FFC11C",light:""},model:{value:t.master.comment,callback:function(e){t.$set(t.master,"comment",e)},expression:"master.comment"}})],1),e(y.Z,[t.isChanged?e("div",{staticClass:"d-flex"},[e(_.Z,{staticClass:"mr-4",attrs:{outlined:"",tile:""},on:{click:t.cancelUpdates}},[t._v(" Отменить ")]),e(_.Z,{attrs:{tile:"",elevation:"0",color:"#FFC11C",dark:""},on:{click:t.successUpdates}},[t._v(" Сoхранить изменения ")])],1):t._e()])],1)],1)],1):t._e(),e(js.Z,{staticClass:"flex-grow-0",attrs:{color:"grey darken-1"}},[e(qs.Z,{on:{click:function(e){t.tableType="services"}}},[t._v("Услуги")]),e(qs.Z,{on:{click:function(e){t.tableType="orders"}}},[t._v("Заказы")])],1),"services"===t.tableType&&t.orders?e("GGroomerServicesTable",{staticClass:"flex-grow-1",attrs:{orders:t.orders}}):t._e(),"orders"===t.tableType&&t.orders?e("GDetailPageOrdersTable",{staticClass:"flex-grow-1",attrs:{orders:t.orders},on:{onLineClick:t.showOrderModal}}):t._e()],1)])},Ir=[];const Ar="https://groomleta.ru",Rr="/mediafiles";var Fr={name:"GGroomerDetail",components:{GColorSelector:Nt,GGroomerServicesTable:ee,GDetailPageOrdersTable:le},data:()=>({tableType:"services",isLoading:!0,master:null,orders:null,avatar:"",posts:Ut,postsList:Vt,oldMaster:{},colors:Bt}),computed:{breadcrumbs(){if(!this.master)return[];const{username:t,lastname:e}=this.master;return[{text:"Груммеры",disabled:!1,to:{name:"g-groomers"}},{text:`${t} ${e}`,disabled:!0}]},isChanged(){return!Object.keys(this.oldMaster).every((t=>this.oldMaster[t]===this.master[t]))},imageURl(){if(!this.master||!this.master.avatar)return"";const{avatar:t}=this.master;return`${Ar+Rr}/${t}`}},mounted(){this.getData()},methods:{...(0,St.nv)(["GET_MASTER_BY_ID","UPDATE_MASTER"]),...(0,St.OI)(["SHOW_ORDER_DETAIL_SHIELD"]),getExperience:xt,async getData(){const t=this.$route.params.id,{data:e}=await this.GET_MASTER_BY_ID(t),{master:s,allOrders:r}=e||{};this.master=JSON.parse(JSON.stringify(s)),this.oldMaster=s,this.orders=r,this.isLoading=!1},loadImage(){this.$refs.avatar.click()},async onUploadImages({target:t}){const e=t.files[0];await gs.master.uploadAvatar(this.$route.params.id,e),this.getData()},onInputClick(t){console.log("onInputClick",t)},cancelUpdates(){this.master=JSON.parse(JSON.stringify(this.oldMaster))},async successUpdates(){const t=this.$route.params.id,e={};Object.keys(this.oldMaster).forEach((t=>{this.oldMaster[t]!==this.master[t]&&(e[t]=this.master[t])}));const{data:s}=await this.UPDATE_MASTER({id:t,formData:e});this.master=JSON.parse(JSON.stringify(s)),this.oldMaster=s},setRate(t){const e=t.replace(/\D/g,"");this.master.rate===+e&&(this.master.rate=t),setTimeout((()=>this.master.rate=+e),0)},setPhone(t){const e=ot(t);this.master.phone===e&&(this.master.phone=t),setTimeout((()=>this.master.phone=e),0)},showOrderModal(t){console.log("showOrderModal",t),this.SHOW_ORDER_DETAIL_SHIELD(t)}}},Lr=Fr,$r=(0,h.Z)(Lr,Zr,Ir,!1,null,null,null),Mr=$r.exports,Gr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-client-detail d-flex flex-column flex-grow-1"},[t.isLoading?e("div",{staticClass:"d-flex align-center flex-grow-1 justify-center"},[e(Dr.Z,{attrs:{size:60,width:5,color:"amber",indeterminate:""}})],1):e("div",{staticClass:"flex-grow-1 d-flex flex-column"},[e(Pr.Z,{attrs:{items:t.breadcrumbs},scopedSlots:t._u([{key:"divider",fn:function(){return[e(O.Z,[t._v("mdi-chevron-right")])]},proxy:!0}])}),e("div",{staticClass:"d-flex align-top"},[e("h1",{staticClass:"mb-6 flex-grow-1",class:{"red--text text--accent-3":t.client.isBlocked}},[t._v(" "+t._s(t.client.username)+" "+t._s(t.client.lastname)+" ")]),e(_.Z,{attrs:{color:"error",elevation:"0",tile:"",small:""},on:{click:t.putToBlock}},[t._v(" В блок ")])],1),e(js.Z,{staticClass:"flex-grow-0",attrs:{color:"grey darken-1"}},[e(qs.Z,{on:{click:function(e){t.tableType="data"}}},[t._v("Данные клиента")]),e(qs.Z,{on:{click:function(e){t.tableType="orders"}}},[t._v("Заказы")])],1),"data"===t.tableType&&t.orders?e("div",{staticClass:"flex-grow-1 mt-6"},[e(w.Z,[e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{staticClass:"text-body-1",attrs:{label:"Фамилия",filled:"",color:"rgba(36, 49, 56, 0.38)",light:"","hide-details":""},model:{value:t.client.lastname,callback:function(e){t.$set(t.client,"lastname",e)},expression:"client.lastname"}})],1),e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{staticClass:"text-body-1",attrs:{label:"Адрес",filled:"",color:"rgba(36, 49, 56, 0.38)",light:"","hide-details":""},model:{value:t.client.address,callback:function(e){t.$set(t.client,"address",e)},expression:"client.address"}})],1)],1),e(w.Z,[e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{staticClass:"text-body-1",attrs:{label:"Имя",filled:"",color:"rgba(36, 49, 56, 0.38)",light:"","hide-details":""},model:{value:t.client.username,callback:function(e){t.$set(t.client,"username",e)},expression:"client.username"}})],1),e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{staticClass:"text-body-1",attrs:{label:"Порода питомца",filled:"",color:"rgba(36, 49, 56, 0.38)",light:"","hide-details":""},model:{value:t.client.animal,callback:function(e){t.$set(t.client,"animal",e)},expression:"client.animal"}})],1)],1),e(w.Z,[e(y.Z,{attrs:{cols:"4"}},[e(D.Z,{staticClass:"text-body-1",attrs:{value:t.client.phone,label:"Телефон",color:"rgba(36, 49, 56, 0.38)",light:"",filled:"","hide-details":""},on:{input:t.setPhone}})],1),e(y.Z,{attrs:{cols:"4"}})],1),e(w.Z,[e(y.Z,{attrs:{cols:"8"}},[e("div",{staticClass:"g-client-detail__textarea-wrapper pa-2"},[e(Z.Z,{attrs:{label:"Заметки",color:"rgba(36, 49, 56, 0.38)",counter:"100","no-resize":"",rows:"6"},model:{value:t.client.comment,callback:function(e){t.$set(t.client,"comment",e)},expression:"client.comment"}})],1)])],1),t.isChanged?e(_.Z,{staticClass:"mt-4",attrs:{color:"#FFC11C",tile:"",dark:"",elevation:"0"},on:{click:t.successUpdates}},[t._v(" Сохранить изменения ")]):t._e(),t.isChanged?e(_.Z,{staticClass:"mt-4 ml-2",attrs:{color:"grey lighten-3",tile:"",light:"",elevation:"0"},on:{click:function(e){t.client={...t.oldClient}}}},[t._v(" Отменить изменения ")]):t._e()],1):t._e(),"orders"===t.tableType&&t.orders?e("GDetailPageOrdersTable",{staticClass:"flex-grow-1",attrs:{orders:t.orders},on:{onLineClick:t.showOrderModal}}):t._e()],1)])},Nr=[],Ur={name:"GClientDetail",components:{GDetailPageOrdersTable:le},data:()=>({client:null,oldClient:null,orders:null,isLoading:!0,tableType:"data"}),computed:{breadcrumbs(){if(!this.client)return[];const{username:t,lastname:e}=this.client;return[{text:"Клиенты",disabled:!1,to:{name:"g-clients"}},{text:`${t} ${e}`,disabled:!0}]},isChanged(){return!Object.keys(this.oldClient).every((t=>this.oldClient[t]===this.client[t]))}},mounted(){this.getData()},methods:{...(0,St.nv)(["GET_CLIENT_BY_ID","UPDATE_CLIENT","PUT_TO_BLOCK"]),...(0,St.OI)(["SHOW_ORDER_DETAIL_SHIELD"]),async getData(){const t=this.$route.params.id,{data:e}=await this.GET_CLIENT_BY_ID(t),{client:s,allOrders:r}=e||{};this.client=JSON.parse(JSON.stringify(s)),this.oldClient=s,this.orders=r,this.isLoading=!1},async successUpdates(){const t=this.$route.params.id,e={};Object.keys(this.oldClient).forEach((t=>{this.oldClient[t]!==this.client[t]&&(e[t]=this.client[t])}));const{data:s}=await this.UPDATE_CLIENT({id:t,data:e}),{client:r}=s||{};r?(this.client=JSON.parse(JSON.stringify(r)),this.oldClient=r):this.$router.push({name:"g-clients"})},showOrderModal(t){this.SHOW_ORDER_DETAIL_SHIELD(t)},setPhone(t){const e=ot(t);this.client.phone===e&&(this.client.phone=t),setTimeout((()=>this.client.phone=e),0)},async putToBlock(){const t=this.$route.params.id;await this.PUT_TO_BLOCK(t),this.getData()}}},Vr=Ur,Br=(0,h.Z)(Vr,Gr,Nr,!1,null,null,null),Wr=Br.exports;r.ZP.use(ws.Z);const qr=[{path:"/",name:"g-calendar",meta:{title:"Календарь",requiresAuth:!0,layout:"main"},component:Ws},{path:"/stock",name:"g-stock",meta:{title:"Склад",requiresAuth:!0,layout:"main"},component:tr},{path:"/orders",name:"g-orders",meta:{title:"Заказы",requiresAuth:!0,layout:"main"},component:lr},{path:"/clients",name:"g-clients",meta:{title:"Клиенты",requiresAuth:!0,layout:"main"},component:vr},{path:"/feedbacks",name:"g-feedbacks",meta:{title:"Отзывы",requiresAuth:!0,layout:"main"},component:Er},{path:"/groomers",name:"g-groomers",meta:{title:"Грумеры",requiresAuth:!0,layout:"main"},component:wr},{path:"/groomer-detail/:id",name:"g-groomerdetail",meta:{title:"Персональная страница мастера",requiresAuth:!0,layout:"main"},component:Mr},{path:"/client-detail/:id",name:"g-clientdetail",meta:{title:"Персональная страница клиента",requiresAuth:!0,layout:"main"},component:Wr},{path:"/login",name:"g-login",meta:{title:"Авторизация",requiresAuth:!1,layout:"empty"},component:Rs}],jr=new ws.Z({mode:"history",base:"/crm/",routes:qr});jr.beforeEach((async(t,e,s)=>{const r=await bs.dispatch("CHECK_USER");console.log("router isAuth:",!!r);const{path:a}=e,{matched:i,meta:n,path:l}=t,o=i.some((t=>t.meta.requiresAuth));!o||r?r&&"/login"===l?jr.push({name:"g-calendar"}):(document.title=n?.title||"Админ панель Groomleta",s()):"/login"!==a&&jr.push({name:"g-login"})}));var Hr=jr,Kr=s(1858);r.ZP.use(Kr.Z);var Yr=new Kr.Z({icons:{values:{}}}),Jr=s(6123),zr=s.n(Jr);r.ZP.config.productionTip=!1,r.ZP.use(zr(),{expire:"30d",sameSite:"Strict"}),new r.ZP({router:Hr,store:bs,vuetify:Yr,render:t=>t(We)}).$mount("#app")},9574:function(t,e,s){t.exports=s.p+"img/logo.e4c3c67a.svg"},4769:function(t,e,s){t.exports=s.p+"img/drag-indicatior.acd49e85.svg"},5053:function(t,e,s){t.exports=s.p+"img/logout.8b4b2fb4.svg"},2191:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA4aSURBVHgBrVnbi11nFV/r23ufS5KamTYq9cFMXkR8MMmjIHQKvje9vPii7asISUFBUZiJClahmCCiTzXFB31q5j9IiuCTNMlDkSKaiQheipmZ1syZc9nf8rcu3z5ncu2kHuabb9/3b631W7dvM/0ffue2zi1VTe+5lvqnhIcruR2cyjw8iv1lkT5lGlArg83M/c0swxst96+1bfX275ZPb9LH/DE95u/c1pmlQe/IWZHDqy33nhEZMACLyJANMA0FM4uDNyFszLcF19/IubnYDp648tZw+RY9xu/AApzbWl06osBpcBYaXQIgztCy0BCgB4KZFTC2cexQEYTsOt1WQXkIQfvsx9VCGG11KU/y+Y2nlzcPgicd5OLzoy+vLffTXyvO60ztMgYekKGFjLM2swAu4T8z8OMPE9tkusJRxitxVqiSGDid9KKXq5pvvvCvnbWDYPpIFvjx6PMr0OplaB0c70mbXXvgO+jRN81Du6pxaF+1DCtgX4+1cgjXwRKiFjqk16kloPmhW0kpJRBqZjogHCSZ0SbV/dW3PjN8JK0eaYGfTj77NZb2nUSzU0xTfTonnkGnGDKFBmZ4fYZKM+ubDYFZw/Wjs6gtOIlrPoE+iVzzFcCzAxeiMCQMSCs8Hl9/8b2tMx9LgNfHx9aonV1ini0nnuJVMwWMMxACA8dxrAWCOMdSEACzo1J8xiAFr/ShxAW8SI0bTDBhyM92sd2sty/h0ssvvfdwSj1QgJ+NB2vQ6Hoi1fIEY8o6VybIFDcaaFZLMAiDIWoB9QOSll0Yt4IO8wbVvGm/BsbahDETtECtt2Potj6uo1Mr6y+9+2Ah7ivAzz84dKbKvMaiwCegzARPnlA3m1CwAiiUlFKwAhtovF3p4+DNid2Tk/iroHVuwnFrxW7ad2PF3A2LB3YM89qL1z74+kcS4Jdbg5Wa2jcq3FhlcbAy4QrgkwoTgoRVyP0Cs1pChSC1BqKQ+gSFF4jSWjUf3JeK1RLwZtyyALrdN9wSZT/nCy+8Mzr+SAF6ma7UmZcq3NxAP3MhxuzAMdMYT8ZgEyYsMjU6WTiRtvNMoXDgOXjMjVFpP3Bh2ieMuFX0mLkaLaXpeOOhAvzm/cEaIvPxBPA1brQ5y4IQewY+8TiAj3W4NeAbRidVa4dEzAbmwBIUkpqNRkoPXBasu0sYpnJ+UShY69QLv99av68Av/3HYAVaX6/AAtM8NFDrQIT0WfUHzvOemDVoDw5t4NUyRjMIgXlK7gvioVTpYxaoXfPII5QTGLdADzeaAGCA1ii9oIcFaiFanT1zZWvpHgGanNcK6AomU803GNiXBjfWYAeugTWmDp5GALkX23uyQCUlNuiUPfwzl8gDv+zhWDPnfYA3YDO1Bsf+nDqdULlz9qMpp7P7BLh8k1aqGb2stKlhukYHtnGMa4zGj5GdVyEtEo24ol0AH0Hje6wCqTAcYZZBJyst1H9V+4whDedcOZhZgC+5T3k+DT/w9GIWMaFUoJmlGgu1MPC5M5fdCiZAr21WLeq4BViBmxPnon1s42ENrNDTa2YayYsQd6SSXWxDCIYQPGYTIJkB1AeU/7BHo0WbaOqIvLcAPrS+MEvQyKkkHd3Y/ANWGLgVTIBa+GyDE2AnKMOuZaUMlNhg2wZe2sODbUz1nPoFEhvtAjiE4Dt40wi4RxahSH1Co5DRp/GKMzdzwDHgMqKRmCYBcuLCcYnQrcwFzW6JlM3NVg37lT/RyqyVU0lLlEg32QKH0hTBQo/BkSucbzFD5ZSSVQtIYnhSPdabNPLj+sYKuJTgE/AVJa9QOT6ARlFGQPhIHcIaeb2cmhdzAdIqonZhNkDCC+lxVWlU07RZrWu7ma0GduAaKDSUaYlCCl6xt0nMR6YAjEwNJhBCJ+6CEFx/qCHSNF3LEVh+z0ptEBJKQPWaUXl6IocAeNVEhRAVYF8l6qWFOquHV9UqW5Z28CaQVYCaaKvnagS2k/A3A05RzVeKXfO8h3AIo4LkIgTXCOfTVoWwXAELqRFGWt6rsyITHIZfHLPSgnKNhHqI8rQCaDxQI+/YqZLw3jwF0jZqxMV84FUgijyrN4S86OAC3myQ5VSN6HLSzlrB5aDBMM7uIXh6BnejwimWUCcHWKVUA2nh7BjMqQdkzftKF7DjKVBsgnf2cP8TAoMQghbbvGd1oIjWgRqslOfFAhIjRz9Ejp8jrQREK1lB4RM1HPaEGKOFrWC08sUMZ2VN8QezDs/DMaxCrQ6k7l6FogJ06M1Aot6IafB3ZIJPAO/nvLEZ94k/xHP/ixvHeMAkQuaMnNCtNW7BddcuDK2ZRLy5cyEK/y2/kJ6nkxCAjhvosIDlHQXf1THOQ/VuPaFCIHuFMBbVOEMI+CdP4QrDHvBPd5mP/Jnu8BdoOlsmuo2H38b9I2hv7DG+q38kuB2c959yuOtD/Vw5o4fZBQKzj9ZVW0657eJsd8wtZ0dcOD2Q2A+Gz+glbTQvsAg9hUh17IMt6i3/Qf7yzx8SGkSmXbLWgYpDdmD9AVLShmlTHtzqOng7jxCxVGuSCoKVymv+QOrcpTTPNiWlmDoFO9tSvDhZCY6gCaUMwfWvbL5Lo78x//EYnB4sQjQl6985nqTNmUnk3aZL5/SgosQAjFxodApC+/XYr3tZtjAvc9zqHSw5k6K15RDJ46w6j/csVuFny9raY0mDmN5DWKxGuHYb194S/tLtqdKdN4c17fSQBhrIrJVFUkvihZU1D2T4ObisArlwnTXK+SIUhxVqhMEdbC13ZJPSUHEnRBLnoycvDUxslU1C5aqlNqxoBWDSxLSHmzUpb2MeET2JMHlitzWe/7tNvDNB4VEj/NfW30AA8zuttPEidrImt4a/NI4Vi4m44V2zm3U1lRvIrCtW/kpyDXvcZdO0R1LXuNPEQGNw1E9i9QrCImI8QOOWO2Tg4aTSQwx+apppt1ZisPQQNT4EthGUsIf0P00ecsjnAOr7VEKJHQunj2MmGMtmDWretIUF03w2siSPu76t8d3Aa8IB59S62fkedY3VLBYWNeyrBSxRqbOC9njWIcT5oxBiYkxMUHrSuot6MOE4aY9HVuPliudgU1ArBXESh6OF35hm+XqdZvkGU+oEZ3GNmwKCMiaEatyWP6i0eN72lQrSMqw4Gi0ZZh5p9J4BLHYY949mWUO+8hJKSVJVqECS8ljlTVJagjaHVUpXVITSOYsHShfhRl1NaCNV8uvk4YALeLOmAXCgZhELfxrDo+AqlaW3AGQ0KtvtPCSiw6N+q+t2YBqAtVoWw5HMj82nIYjdiscm664hRBKtvYzrlYde6XzDKQa9XE3Lz9M2Gvmr1ry01oF5Kd2SdWNaryTrmFiCKg7YhLDavTQn0pXEXT2jhGFrR/vYV0sMVBDMwzLDKjgmQ/jKAIHdrsG1fez3rSeBMkNZPFvon2d8beO7y5u10auVtyHUanILmFZKWjePybFf5jl9QhBxEns35ZSKMIfn2fobfAENJSswmmVbEvbyBTQynxIr0y0eaBCpUnSYtuKkjZm9NhK0BcmLRKUjS3QBWtpGiSxp/9oMLSxrFMALPesifWyFTbyZoCh9LfBo5cHeqqolWKBZQXfMfd3HttJrmMmP2zV+rttWBaAw0nsaS5Z4RdVc7QRg0Ah1+UV3PHYwlvLv4nrRcFkSXazuYjmEtJfPXdXlYV08zDdmDY1ksIYBVKoIBUAARdvf2j4EUSHJK93WhME9bALCmpfe+r6vXM/XhSZ0ASC2u9J21vHZBck8b+u61YPF0TUd3JVV5DWBBwVfDdVV0Sa0a2sUIUxfLRDDwdLCNWRhV681S1Z0vsDuBOBXFDysUFbDyuqYkq8TRiTCY/iCL8a6w4bPlPWs+c+SYBXdm/uDDVvpcGHUMlmXuzBs9msUbLGCC4Dugs5fWp9/xbmn6pM36BrAntq32GprlDLvWdvoY+cNunjsC3/Q7YhY/9m9JbvoF3YRHkeVDdmFg+5hfw/7E501DyTNg7YGLhOc1wytDmzr3+x6xNi88JMnTyzivXd1mul5ANqOaDNf0pCuhnc/KEt/TjGv63P4jZXGsvBIK1LsS4BGutpWilzDlVGKLNSa5ik0nZ0yxVq4Z3vA/OzdcO8RAFTaBKRzHVhvsCUSk1eoTpUAHH2cNyUm6byA6b7ReCFIhUqeIOsyaE6ZOjuF3FfM6fUaXaN65bXX7v0AeN/vA/wNehOAz3f9qdovR4SyQQufhbiETnfczF1f0ZX0XW3l6x4VWSgUC68qAO4Jq/g+XuWzh01EpvUfvX5s435YH/iFhs/SOkCuh/NG76pCyHzVIEeDoZrv1i7J6UZFDOHFciYKQ01WrFaoItHZ98rYVjrV9g1Tw28+/70Lnzz/IJwP/UbGr1q4eh4otr3xpkXw1O0X3pefyL6u0CtcW93phFAr2EcmUUEUMOuXA64CeIOWCOXMy9++8On1h2F85FdK/hZtAORpCLC5sG4jd4HnWMdZaMBl3orGQoI6sfpAxaVYFBPERwiiPQ7J9TxrT3/zF59685H46AA/WTdard3zOcgSH3ln74tUnuxw7vZoE+tZFhrJan8NkbavITS2UQ/pFwZs72D96+JXf/X0+kfFdKAv9awCJDoBwJfmfI/lCJOwWwmJEOT+URYEOD42Mfu2+4b1GVso735QHR6dOAj4+Yse4yffoRUkq2cgyKvQ9he7Nc1iDZ9la3TLElTRuK4uqjX0o+00patYJn0bvdqFZy+d2KbH+D22APuEOQdhJrQKC5wEaPWX4xBgRQXaQiZGVt1Btt0B6OsQ4CYy6422126cfkzQi7//AR/KZR+i+uDEAAAAAElFTkSuQmCC"}},e={};function s(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,r,a,i){if(!r){var n=1/0;for(d=0;d<t.length;d++){r=t[d][0],a=t[d][1],i=t[d][2];for(var l=!0,o=0;o<r.length;o++)(!1&i||n>=i)&&Object.keys(s.O).every((function(t){return s.O[t](r[o])}))?r.splice(o--,1):(l=!1,i<n&&(n=i));if(l){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[r,a,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/crm/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,i,n=r[0],l=r[1],o=r[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(o)var d=o(s)}for(e&&e(r);c<n.length;c++)i=n[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},r=self["webpackChunkgroomleta_admin"]=self["webpackChunkgroomleta_admin"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(1451)}));r=s.O(r)})();
//# sourceMappingURL=app.3a80c1e3.js.map